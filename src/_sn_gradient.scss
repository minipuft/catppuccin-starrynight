// StarryNight Gradient Module - Year 3000 Organic Transition System
// Phase 2: Enhanced dynamic album art background gradients with breathing rhythm
@use "mixins" as *;

// CSS custom properties for dynamic color updates
:root {
  // Default gradient values using Catppuccin base colors (will be overridden by JavaScript)
  --sn-gradient-primary: var(--spice-accent);
  --sn-gradient-secondary: var(--spice-surface0);
  --sn-gradient-accent: var(--spice-surface1);

  // RGB versions for components that need them
  --sn-gradient-primary-rgb: var(--spice-rgb-accent);
  --sn-gradient-secondary-rgb: var(--spice-rgb-surface0);
  --sn-gradient-accent-rgb: var(--spice-rgb-surface1);

  // YEAR 3000: Gentle parameters (Phase 2)
  --sn-gradient-opacity: 0.08; // Much gentler than 0.35
  --sn-gradient-blur: 30px; // Slightly increased for softness
  --sn-gradient-saturation: 1.05; // Very subtle enhancement (down from 1.4)
  --sn-gradient-brightness: 1.02; // Barely noticeable (down from 1.2)
  --sn-gradient-contrast: 1.01; // Minimal contrast boost

  // YEAR 3000: Organic transition system (Phase 2)
  --sn-gradient-transition: 2400ms
    var(--sn-easing-emergence, cubic-bezier(0.25, 0.46, 0.45, 0.94));

  // Phase 2: Breathing rhythm variables (set by JavaScript)
  --sn-organic-duration: 2400ms;
  --sn-breathing-inhale: 1200ms;
  --sn-breathing-hold: 600ms;
  --sn-breathing-exhale: 600ms;

  // Phase 2: Natural easing curves (golden ratio based)
  --sn-easing-organic: cubic-bezier(0.618, 0, 0.382, 1);
  --sn-easing-breathing: cubic-bezier(0.455, 0.03, 0.515, 0.955);
  --sn-easing-emergence: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  --sn-easing-harmony: cubic-bezier(0.165, 0.84, 0.44, 1);

  // Phase 2: GPU acceleration optimization
  --sn-gpu-acceleration: transform, opacity, filter;
}

// YEAR 3000: Main gradient background overlay with gentle organic breathing
.Root__main-view {
  position: relative;

  // Primary gradient layer - GENTLE & ORGANIC (Phase 2)
  &::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(
      ellipse at center,
      rgba(var(--sn-gradient-primary-rgb), 0.12) 0%,
      // Much gentler than 0.4
      rgba(var(--sn-gradient-secondary-rgb), 0.06) 40%,
      // Reduced from 0.2
      rgba(var(--sn-gradient-primary-rgb), 0.03) 70%,
      // Reduced from 0.1
      var(--spice-base) 100%
    );
    opacity: var(--sn-gradient-opacity);
    z-index: -10;
    transition: all var(--sn-gradient-transition);
    filter: blur(var(--sn-gradient-blur))
      saturate(var(--sn-gradient-saturation))
      brightness(var(--sn-gradient-brightness))
      contrast(var(--sn-gradient-contrast));

    // Phase 2: GPU acceleration for organic transitions
    will-change: var(--sn-gpu-acceleration);
    transform: translateZ(0); // Force GPU layer
    @include performance-optimized;
  }

  // YEAR 3000: Secondary accent gradient for subtle depth (Phase 2)
  &::after {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      135deg,
      rgba(var(--sn-gradient-accent-rgb), 0.08) 0%,
      // Much gentler than 0.25
      transparent 30%,
      transparent 70%,
      rgba(var(--sn-gradient-accent-rgb), 0.04) 100% // Reduced from 0.15
    );
    opacity: calc(var(--sn-gradient-opacity) * 0.6); // Even gentler multiplier
    z-index: -9;
    transition: all var(--sn-gradient-transition);

    // Phase 2: GPU acceleration for organic transitions
    will-change: var(--sn-gpu-acceleration);
    transform: translateZ(0); // Force GPU layer
    @include performance-optimized;
  }
}

// YEAR 3000: Enhanced gradient for main content areas (gentle breathing)
.main-gridContainer-gridContainer {
  position: relative;

  &::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      180deg,
      rgba(var(--sn-gradient-primary-rgb), 0.06) 0%,
      // Much gentler than 0.2
      rgba(var(--sn-gradient-secondary-rgb), 0.03) 50%,
      // Reduced from 0.12
      transparent 100%
    );
    z-index: -1;
    transition: all var(--sn-gradient-transition);
    pointer-events: none;

    // Phase 2: GPU optimization
    will-change: var(--sn-gpu-acceleration);
    transform: translateZ(0);
    @include performance-optimized;
  }
}

// Year 3000: Enhanced gradient for album/artist pages (gentle organic)
.main-entityHeader-container,
.main-shelf-header {
  position: relative;

  &::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      180deg,
      rgba(var(--sn-gradient-primary-rgb), 0.08) 0%,
      // Much gentler than 0.3
      rgba(var(--spice-rgb-base), 0.5) 70%,
      // Reduced from 0.8
      var(--spice-base) 100%
    );
    opacity: calc(var(--sn-gradient-opacity) * 1); // Reduced from 1.2
    z-index: -1;
    transition: all var(--sn-gradient-transition);

    // Phase 2: GPU acceleration for organic transitions
    will-change: var(--sn-gpu-acceleration);
    transform: translateZ(0);
    @include performance-optimized;
  }
}

// Year 3000: Now playing bar gentle gradient (breathing rhythm)
.Root__now-playing-bar {
  position: relative;

  &::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      90deg,
      rgba(var(--sn-gradient-primary-rgb), 0.06) 0%,
      // Much gentler than 0.2
      rgba(var(--spice-rgb-player), 0.3) 50%,
      // Reduced from 0.5
      rgba(var(--sn-gradient-primary-rgb), 0.06) 100% // Gentle consistency
    );
    opacity: calc(var(--sn-gradient-opacity) * 0.5); // Gentler than 0.7
    z-index: -1;
    transition: all var(--sn-gradient-transition);

    // Phase 2: GPU acceleration for organic transitions
    will-change: var(--sn-gpu-acceleration);
    transform: translateZ(0);
    @include performance-optimized;
  }
}

// Year 3000: Utility classes for organic gradient control (Phase 2)
.sn-gradient-disabled {
  .Root__main-view::before,
  .Root__main-view::after {
    opacity: 0 !important;
    transition: opacity 600ms var(--sn-easing-harmony) !important;
  }
}

.sn-gradient-minimal {
  --sn-gradient-opacity: 0.04; // Even gentler than default
  --sn-gradient-blur: 40px; // More diffused
  --sn-gradient-saturation: 1.02; // Barely noticeable
}

.sn-gradient-balanced {
  --sn-gradient-opacity: 0.08; // Default Year 3000 value
  --sn-gradient-blur: 30px; // Default blur
  --sn-gradient-saturation: 1.05; // Default gentle enhancement
}

.sn-gradient-intense {
  --sn-gradient-opacity: 0.12; // Still much gentler than old 0.5
  --sn-gradient-blur: 20px; // Slightly less diffused
  --sn-gradient-saturation: 1.08; // Maximum gentle enhancement
}

// Phase 2: Breathing rhythm intensity controls
.sn-breathing-subtle {
  --sn-breathing-inhale: 800ms;
  --sn-breathing-hold: 400ms;
  --sn-breathing-exhale: 400ms;
}

.sn-breathing-moderate {
  --sn-breathing-inhale: 1200ms; // Default
  --sn-breathing-hold: 600ms; // Default
  --sn-breathing-exhale: 600ms; // Default
}

.sn-breathing-deep {
  --sn-breathing-inhale: 1600ms;
  --sn-breathing-hold: 800ms;
  --sn-breathing-exhale: 800ms;
}

// Phase 2: Performance optimization class
.sn-performance-mode {
  .Root__main-view::before,
  .Root__main-view::after,
  .main-gridContainer-gridContainer::before,
  .Root__now-playing-bar::before {
    will-change: auto !important; // Disable GPU acceleration
    filter: none !important; // Disable filters for performance
    --sn-gradient-transition: 1000ms ease !important; // Simpler transition
  }
}
