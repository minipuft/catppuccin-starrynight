// ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
// YEAR 3000 BEAT SYNC ENHANCED - Advanced Rhythm Synchronization
// ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà

// üå°Ô∏è EMOTIONAL TEMPERATURE ENHANCED BEAT SYNC
// Now Playing Bar with Emotional Temperature Breathing
.main-nowPlayingBar-nowPlayingBar {
  // üå°Ô∏è Enhanced breathing effect with emotional temperature integration
  transform: scale(
    calc(
      var(--sn-music-breathing-scale, 1) * 
      (1 + var(--sn-audio-emotional-intensity, 0.5) * 0.05)
    )
  );
  transition: transform 
    calc(var(--sn-audio-breathing-cycle, 4s) * 0.1) 
    var(--sn-anim-easing-organic, cubic-bezier(0.4, 0, 0.2, 1));
  
  // Apply emotional temperature breathing animation when available
  &:where(.emotion-calm, .emotion-energetic, .emotion-melancholy) {
    animation: beat-sync-breathing var(--sn-audio-breathing-cycle, 4s) ease-in-out infinite;
  }

  // üå°Ô∏è Enhanced heart icon with emotional temperature response
  .main-addButton-button.control-button-heart {
    // Kinetic Verb: BLOOM - Love beats with emotional intensity!
    transform: scale(
      calc(
        1 + 
        (var(--sn-music-beat-pulse-intensity, 0) * 0.15) +
        (var(--sn-audio-emotional-intensity, 0.5) * 0.08)
      )
    );
    
    // Enhanced breathing for emotional connection (1.5x strength)
    animation: audio-element-breathing var(--sn-audio-breathing-cycle, 1s) ease-in-out infinite;
    --breathing-context-multiplier: var(--sn-audio-breathing-enhanced, 1.5);
    
    transition: transform 
      140ms 
      var(--sn-anim-easing-organic, cubic-bezier(0.4, 0, 0.2, 1));

    // üå°Ô∏è Emotional temperature-aware glow
    filter: 
      drop-shadow(
        0 0 
        calc(
          6px * 
          var(--sn-music-beat-pulse-intensity, 0) * 
          var(--sn-audio-emotional-intensity, 0.5)
        )
        rgba(
          var(--sn-emotion-romantic-accent, var(--spice-rgb-red, 243, 139, 168)),
          calc(0.6 * var(--sn-music-beat-pulse-intensity, 0) * var(--sn-audio-emotional-intensity, 0.5))
        )
      )
      saturate(var(--sn-audio-emotional-saturation, 1))
      brightness(var(--sn-audio-temperature-brightness, 1));
    
    // Apply emotional temperature class-specific enhancements
    &:where(.emotion-romantic, .emotion-happy) {
      filter: 
        drop-shadow(
          0 0 
          calc(8px * var(--sn-music-beat-pulse-intensity, 0))
          rgba(var(--sn-emotion-romantic-accent), 0.8)
        )
        saturate(1.2)
        brightness(1.1);
      
      animation: romantic-heart-pulse var(--sn-audio-breathing-cycle, 3s) ease-in-out infinite;
    }
    
    &:where(.emotion-energetic, .emotion-aggressive) {
      animation: energetic-heart-pulse calc(var(--sn-audio-breathing-cycle, 2s) * 0.8) ease-in-out infinite;
    }
    
    &:where(.emotion-calm, .emotion-ambient) {
      animation: calm-heart-pulse calc(var(--sn-audio-breathing-cycle, 6s) * 1.2) ease-in-out infinite;
    }
  }
  
  // Currently playing track information with standard breathing (1.0x strength)
  .main-trackInfo-container,
  .main-trackInfo-name {
    // Standard breathing for active musical element (1.0x strength)
    animation: audio-element-breathing var(--sn-audio-breathing-cycle, 1s) ease-in-out infinite;
    --breathing-context-multiplier: var(--sn-audio-breathing-standard, 1.0);
  }
}

// üå°Ô∏è EMOTIONAL TEMPERATURE BEAT SYNC ANIMATIONS

// Natural beat sync breathing animation
@keyframes beat-sync-breathing {
  0%, 100% {
    transform: scale(
      calc(
        var(--sn-music-breathing-scale, 1) * 
        (1 + var(--sn-audio-emotional-intensity, 0.5) * 0.03)
      )
    );
    filter: 
      saturate(var(--sn-audio-emotional-saturation, 1))
      brightness(var(--sn-audio-temperature-brightness, 1));
  }
  50% {
    transform: scale(
      calc(
        var(--sn-music-breathing-scale, 1) * 
        (1 + var(--sn-audio-emotional-intensity, 0.5) * 0.08)
      )
    );
    filter: 
      saturate(calc(var(--sn-audio-emotional-saturation, 1) * 1.1))
      brightness(calc(var(--sn-audio-temperature-brightness, 1) * 1.05));
  }
}

// Romantic heart pulse animation
@keyframes romantic-heart-pulse {
  0%, 100% {
    transform: scale(
      calc(
        1 + 
        (var(--sn-music-beat-pulse-intensity, 0) * 0.15) +
        (var(--natural-emotional-intensity, 0.7) * 0.05)
      )
    );
    filter: 
      drop-shadow(
        0 0 6px 
        rgba(var(--sn-emotion-romantic-accent), 0.6)
      )
      hue-rotate(var(--sn-audio-temperature-hue-shift, 0deg));
  }
  50% {
    transform: scale(
      calc(
        1 + 
        (var(--sn-music-beat-pulse-intensity, 0) * 0.20) +
        (var(--natural-emotional-intensity, 0.7) * 0.10)
      )
    );
    filter: 
      drop-shadow(
        0 0 10px 
        rgba(var(--sn-emotion-romantic-accent), 0.8)
      )
      hue-rotate(var(--sn-audio-temperature-hue-shift, 0deg))
      saturate(1.2);
  }
}

// Energetic heart pulse animation
@keyframes energetic-heart-pulse {
  0%, 100% {
    transform: scale(
      calc(
        1 + 
        (var(--sn-music-beat-pulse-intensity, 0) * 0.12) +
        (var(--natural-emotional-intensity, 1.0) * 0.06)
      )
    );
    filter: 
      drop-shadow(
        0 0 4px 
        rgba(var(--sn-emotion-energetic-accent), 0.7)
      )
      hue-rotate(var(--sn-audio-temperature-hue-shift, 0deg));
  }
  60% {
    transform: scale(
      calc(
        1 + 
        (var(--sn-music-beat-pulse-intensity, 0) * 0.20) +
        (var(--natural-emotional-intensity, 1.0) * 0.12)
      )
    );
    filter: 
      drop-shadow(
        0 0 12px 
        rgba(var(--sn-emotion-energetic-accent), 1.0)
      )
      hue-rotate(calc(var(--sn-audio-temperature-hue-shift, 0deg) + 10deg))
      saturate(1.4)
      brightness(1.15);
  }
}

// Calm heart pulse animation
@keyframes calm-heart-pulse {
  0%, 100% {
    transform: scale(
      calc(
        1 + 
        (var(--sn-music-beat-pulse-intensity, 0) * 0.08) +
        (var(--natural-emotional-intensity, 0.6) * 0.04)
      )
    );
    filter: 
      drop-shadow(
        0 0 3px 
        rgba(var(--sn-emotion-calm-accent), 0.5)
      )
      hue-rotate(var(--sn-audio-temperature-hue-shift, 0deg))
      blur(0.5px);
  }
  50% {
    transform: scale(
      calc(
        1 + 
        (var(--sn-music-beat-pulse-intensity, 0) * 0.12) +
        (var(--natural-emotional-intensity, 0.6) * 0.06)
      )
    );
    filter: 
      drop-shadow(
        0 0 6px 
        rgba(var(--sn-emotion-calm-accent), 0.7)
      )
      hue-rotate(var(--sn-audio-temperature-hue-shift, 0deg))
      blur(0.3px)
      saturate(1.1)
      brightness(1.05);
  }
}

// üå°Ô∏è Enhanced cards with emotional temperature beat sync (performance optimized)
.main-card-card {
  // Only apply emotional temperature beat sync on hover for performance
  &:hover:where(.emotion-energetic, .emotion-happy, .emotion-epic) {
    animation: card-energetic-pulse 
      calc(var(--sn-audio-breathing-cycle, 2s) * 0.8) 
      ease-in-out infinite;
  }
  
  &:hover:where(.emotion-calm, .emotion-ambient, .emotion-romantic) {
    animation: card-calm-pulse 
      calc(var(--sn-audio-breathing-cycle, 5s) * 1.2) 
      ease-in-out infinite;
  }
  
  transition: transform 
    200ms 
    var(--natural-ease-visual, cubic-bezier(0.4, 0, 0.2, 1));
}

// Card pulse animations
@keyframes card-energetic-pulse {
  0%, 100% {
    transform: translateY(-2px) 
      scale(calc(1 + (var(--sn-music-beat-pulse-intensity, 0) * 0.015)));
  }
  50% {
    transform: translateY(-4px) 
      scale(calc(1 + (var(--sn-music-beat-pulse-intensity, 0) * 0.025)));
  }
}

@keyframes card-calm-pulse {
  0%, 100% {
    transform: translateY(-1px) 
      scale(calc(1 + (var(--sn-music-beat-pulse-intensity, 0) * 0.010)));
  }
  50% {
    transform: translateY(-2px) 
      scale(calc(1 + (var(--sn-music-beat-pulse-intensity, 0) * 0.015)));
  }
}

// üå°Ô∏è ACCESSIBILITY AND PERFORMANCE OPTIMIZATIONS

// Reduced motion support - disable emotional temperature animations
@media (prefers-reduced-motion: reduce) {
  .main-nowPlayingBar-nowPlayingBar,
  .main-addButton-button.control-button-heart,
  .main-card-card {
    animation: none !important;
    transition-duration: 0.1s !important;
  }
  
  // Keep basic beat pulse but remove emotional temperature enhancements
  .main-addButton-button.control-button-heart {
    transform: scale(calc(1 + (var(--sn-music-beat-pulse-intensity, 0) * 0.05))) !important;
    filter: none !important;
  }
}

// High contrast mode - enhance emotional temperature visibility
@media (prefers-contrast: high) {
  .main-addButton-button.control-button-heart {
    filter: 
      drop-shadow(
        0 0 
        calc(8px * var(--sn-music-beat-pulse-intensity, 0))
        rgba(var(--sn-emotion-romantic-accent), 1.0)
      )
      saturate(2.0) !important
      contrast(2.0) !important
      brightness(1.3) !important;
  }
}

// Performance mode - simplified emotional temperature effects
.sn-performance-mode {
  .main-nowPlayingBar-nowPlayingBar,
  .main-addButton-button.control-button-heart,
  .main-card-card {
    animation: none !important;
    transition-duration: 100ms !important;
  }
  
  .main-addButton-button.control-button-heart {
    filter: 
      drop-shadow(
        0 0 
        calc(4px * var(--sn-music-beat-pulse-intensity, 0))
        rgba(var(--spice-rgb-red, 243, 139, 168), 0.4)
      ) !important;
  }
}