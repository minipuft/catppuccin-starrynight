/* ████████████████████████████████████████████████████████████████████████████████*/
/* SIDEBAR ANIMATION FLOWS MODULE*/
/* Year 3000 Bilateral Visual Effects & Smooth Animation Styling*/
/* ████████████████████████████████████████████████████████████████████████████████*/
/**/
/* This module contains all styles for the bilateral visual effects flow system.*/
/* It provides dynamic visual effects that respond to:*/
/* - Bilateral visual states (anticipatory, reflective, synchronized)*/
/* - Smooth animation flow direction and intensity*/
/* - Music energy levels and harmonic resonance*/
/* - Real-time spatial navigation depth*/
/**/
/* Enhanced for Year 3000 vision with:*/
/* - Emergent systems choreography*/
/* - Visual-effects-aware interfaces*/
/* - Temporal flow states*/
/* - Aesthetic gravity fields*/
/**/
/* Dependencies:*/
/* - Enhanced CSS variables from SidebarSystemsIntegration*/
/* - UnifiedCSSVariableManager batching system*/
/* - Bilateral visual effects timing coordination*/
/**/
/* ████████████████████████████████████████████████████████████████████████████████*/
@use "../core/_mixins" as *;

:root {
  /* === BILATERAL VISUAL EFFECTS CORE VARIABLES ===*/
  --sidebar-visual-effects-state: "active"; /* "dormant" | "active" | "focused" | "enhanced" */
  --sidebar-music-intensity: 0.5; /* 0-1 real-time music energy */
  --sidebar-spatial-depth: 0; /* 0-4 current dimensional layer */
  --sidebar-flow-direction: 0deg; /* 0-360deg directional flow based on audio */
  
  /* === SMOOTH ANIMATION FLOW VARIABLES ===*/
  --sidebar-flow-fluidity: 0.7; /* 0-1 smooth animation parameter */
  --sidebar-flow-velocity: 100; /* pixels per second flow speed */
  --sidebar-flow-intensity: 0.5; /* 0-1 overall flow strength */
  --sidebar-flow-turbulence: 0.1; /* 0-1 natural flow variation */
  
  /* === BILATERAL TIMING COORDINATION ===*/
  --sidebar-left-timing-offset: -150ms; /* Anticipatory timing */
  --sidebar-right-timing-offset: 150ms; /* Reflective timing */
  --sidebar-bilateral-sync-rate: 1000ms; /* Synchronization frequency */
  
  /* === VISUAL EFFECTS FLOW GRADIENTS ===*/
  --sidebar-visual-effects-gradient-primary: linear-gradient(
    var(--sidebar-flow-direction, 0deg),
    rgba(var(--spice-rgb-accent, 203, 214, 244), var(--sidebar-flow-intensity, 0.5)) 0%,
    rgba(var(--spice-rgb-accent, 203, 214, 244), calc(var(--sidebar-flow-intensity, 0.5) * 0.3)) 50%,
    transparent 100%
  );
  
  --sidebar-visual-effects-gradient-secondary: radial-gradient(
    ellipse at var(--sidebar-spatial-depth, 0%) 50%,
    rgba(var(--spice-rgb-player, 24, 24, 37), var(--sidebar-music-intensity, 0.5)) 0%,
    rgba(var(--spice-rgb-player, 24, 24, 37), calc(var(--sidebar-music-intensity, 0.5) * 0.6)) 40%,
    transparent 80%
  );
  
  /* === SPATIAL NAVIGATION DEPTH LAYERS ===*/
  --sidebar-depth-layer-0: translateZ(0px) scale(1); /* Surface layer */
  --sidebar-depth-layer-1: translateZ(-50px) scale(0.95); /* Navigation items */
  --sidebar-depth-layer-2: translateZ(-100px) scale(0.9); /* Context items */
  --sidebar-depth-layer-3: translateZ(-150px) scale(0.85); /* Background items */
  --sidebar-depth-layer-4: translateZ(-200px) scale(0.8); /* Deep background */
  
  /* === VISUAL EFFECTS STATE MULTIPLIERS ===*/
  --visual-effects-dormant-multiplier: 0.3;
  --visual-effects-active-multiplier: 0.7;
  --visual-effects-focused-multiplier: 0.9;
  --visual-effects-enhanced-multiplier: 1.0;
  
  /* === PERFORMANCE-AWARE VARIABLES ===*/
  --sidebar-animation-quality: 1; /* 0-1 quality scaling based on performance */
  --sidebar-frame-budget: 16.67ms; /* Target frame time */
  --sidebar-optimization-mode: "balanced"; /* "performance" | "balanced" | "quality" */
}

/* ============================================================================ */
/* BILATERAL VISUAL EFFECTS STATES */
/* ============================================================================ */

/* Base bilateral visual effects container */
.bilateral-visual-effects-container {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  contain: layout style paint;
  
  /* Visual effects flow background */
  background: 
    var(--sidebar-visual-effects-gradient-primary),
    var(--sidebar-visual-effects-gradient-secondary);
  background-attachment: fixed;
  background-size: 
    200% 100%,
    100% 200%;
  
  /* Bilateral timing coordination */
  transition: 
    background-position var(--sidebar-bilateral-sync-rate, 1000ms) var(--sn-anim-easing-standard),
    opacity var(--sidebar-bilateral-sync-rate, 1000ms) ease-out;
  
  /* Flow direction animation */
  animation: visual-effects-flow-cycle 
    calc(60s / max(var(--sidebar-flow-velocity, 100), 10)) 
    infinite linear;
}

/* Left sidebar anticipatory visual effects */
.bilateral-visual-effects-container.sidebar-left {
  animation-delay: var(--sidebar-left-timing-offset, -150ms);
  
  .visual-effects-flow {
    transform-origin: left center;
    animation: anticipatory-flow 
      calc(2s + var(--sidebar-music-intensity, 0.5) * 1s) 
      infinite ease-in-out;
  }
}

/* Right sidebar reflective visual effects */
.bilateral-visual-effects-container.sidebar-right {
  animation-delay: var(--sidebar-right-timing-offset, 150ms);
  
  .visual-effects-flow {
    transform-origin: right center;
    animation: reflective-flow 
      calc(2s + var(--sidebar-music-intensity, 0.5) * 1s) 
      infinite ease-in-out;
  }
}

/* ============================================================================ */
/* VISUAL EFFECTS STATE VARIATIONS */
/* ============================================================================ */

/* Dormant state - minimal activity */
.bilateral-visual-effects-container[data-visual-effects-state="dormant"] {
  --sidebar-flow-intensity: calc(0.2 * var(--visual-effects-dormant-multiplier, 0.3));
  --sidebar-flow-velocity: calc(50 * var(--visual-effects-dormant-multiplier, 0.3));
  
  filter: grayscale(0.7) brightness(0.6);
  opacity: 0.4;
}

/* Active state - normal activity */
.bilateral-visual-effects-container[data-visual-effects-state="active"] {
  --sidebar-flow-intensity: calc(0.5 * var(--visual-effects-active-multiplier, 0.7));
  --sidebar-flow-velocity: calc(100 * var(--visual-effects-active-multiplier, 0.7));
  
  filter: none;
  opacity: 0.8;
}

/* Focused state - enhanced activity */
.bilateral-visual-effects-container[data-visual-effects-state="focused"] {
  --sidebar-flow-intensity: calc(0.8 * var(--visual-effects-focused-multiplier, 0.9));
  --sidebar-flow-velocity: calc(150 * var(--visual-effects-focused-multiplier, 0.9));
  
  filter: contrast(1.1) brightness(1.1);
  opacity: 1.0;
  
  /* Enhanced glow effect */
  box-shadow: inset 0 0 20px rgba(var(--spice-rgb-accent, 203, 214, 244), 0.2);
}

/* Enhanced state - maximum activity */
.bilateral-visual-effects-container[data-visual-effects-state="enhanced"] {
  --sidebar-flow-intensity: calc(1.0 * var(--visual-effects-enhanced-multiplier, 1.0));
  --sidebar-flow-velocity: calc(200 * var(--visual-effects-enhanced-multiplier, 1.0));
  
  filter: contrast(1.2) brightness(1.2) saturate(1.3);
  opacity: 1.0;
  
  /* Enhanced aura effect */
  box-shadow: 
    inset 0 0 30px rgba(var(--spice-rgb-accent, 203, 214, 244), 0.4),
    0 0 50px rgba(var(--spice-rgb-accent, 203, 214, 244), 0.2);
}

/* ============================================================================ */
/* SMOOTH VISUAL EFFECTS FLOW EFFECTS */
/* ============================================================================ */

.visual-effects-flow {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: -1;
  
  /* Smooth fluidity effect */
  filter: blur(calc(2px * (1 - var(--sidebar-flow-fluidity, 0.7))));

  
  /* Flow field background */
  background: 
    radial-gradient(
      circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
      rgba(var(--spice-rgb-accent, 203, 214, 244), var(--sidebar-flow-intensity, 0.5)) 0%,
      rgba(var(--spice-rgb-accent, 203, 214, 244), calc(var(--sidebar-flow-intensity, 0.5) * 0.3)) 30%,
      transparent 70%
    );
  
  /* Turbulence variation */
  animation: smooth-turbulence 
    calc(10s / max(var(--sidebar-flow-turbulence, 0.1), 0.01)) 
    infinite ease-in-out;
}

/* ============================================================================ */
/* SPATIAL NAVIGATION DEPTH EFFECTS */
/* ============================================================================ */

.sidebar-spatial-layer {
  transform: var(--sidebar-depth-transform, translateZ(0) scale(1));
  transition: transform 600ms var(--sn-anim-easing-elastic);
  
  /* Depth-based opacity */
  opacity: calc(1 - abs(var(--sidebar-spatial-depth, 0)) * 0.1);
  
  /* Depth-based blur for depth of field */
  filter: blur(calc(abs(var(--sidebar-spatial-depth, 0)) * 1px));
}

/* Individual depth layer transforms */
.sidebar-spatial-layer[data-depth="0"] { --sidebar-depth-transform: var(--sidebar-depth-layer-0); }
.sidebar-spatial-layer[data-depth="1"] { --sidebar-depth-transform: var(--sidebar-depth-layer-1); }
.sidebar-spatial-layer[data-depth="2"] { --sidebar-depth-transform: var(--sidebar-depth-layer-2); }
.sidebar-spatial-layer[data-depth="3"] { --sidebar-depth-transform: var(--sidebar-depth-layer-3); }
.sidebar-spatial-layer[data-depth="4"] { --sidebar-depth-transform: var(--sidebar-depth-layer-4); }

/* ============================================================================ */
/* MUSIC-RESPONSIVE FLOW ANIMATIONS */
/* ============================================================================ */

@keyframes visual-effects-flow-cycle {
  0% {
    background-position: 0% 0%, 0% 0%;
    transform: rotate(var(--sidebar-flow-direction, 0deg));
  }
  25% {
    background-position: 25% 25%, 25% 25%;
    transform: rotate(calc(var(--sidebar-flow-direction, 0deg) + 5deg));
  }
  50% {
    background-position: 50% 50%, 50% 50%;
    transform: rotate(var(--sidebar-flow-direction, 0deg));
  }
  75% {
    background-position: 75% 25%, 75% 75%;
    transform: rotate(calc(var(--sidebar-flow-direction, 0deg) - 5deg));
  }
  100% {
    background-position: 100% 0%, 100% 100%;
    transform: rotate(var(--sidebar-flow-direction, 0deg));
  }
}

@keyframes anticipatory-flow {
  0%, 100% {
    transform: translateX(0) scaleX(1);
    opacity: var(--sidebar-flow-intensity, 0.5);
  }
  33% {
    transform: translateX(2px) scaleX(1.01);
    opacity: calc(var(--sidebar-flow-intensity, 0.5) * 1.2);
  }
  66% {
    transform: translateX(-1px) scaleX(0.99);
    opacity: calc(var(--sidebar-flow-intensity, 0.5) * 0.8);
  }
}

@keyframes reflective-flow {
  0%, 100% {
    transform: translateX(0) scaleX(1);
    opacity: var(--sidebar-flow-intensity, 0.5);
  }
  50% {
    transform: translateX(-2px) scaleX(0.98);
    opacity: calc(var(--sidebar-flow-intensity, 0.5) * 0.7);
  }
}

@keyframes smooth-turbulence {
  0%, 100% {
    filter: blur(calc(2px * (1 - var(--sidebar-flow-fluidity, 0.7)))) 
           hue-rotate(0deg);
  }
  25% {
    filter: blur(calc(1px * (1 - var(--sidebar-flow-fluidity, 0.7)))) 
           hue-rotate(5deg);
  }
  50% {
    filter: blur(calc(3px * (1 - var(--sidebar-flow-fluidity, 0.7)))) 
           hue-rotate(-3deg);
  }
  75% {
    filter: blur(calc(1.5px * (1 - var(--sidebar-flow-fluidity, 0.7)))) 
           hue-rotate(8deg);
  }
}

/* ============================================================================ */
/* PERFORMANCE OPTIMIZATION */
/* ============================================================================ */

/* Reduced motion preference support */
@media (prefers-reduced-motion: reduce) {
  .bilateral-visual-effects-container,
  .visual-effects-flow,
  .sidebar-spatial-layer {
    animation: none !important;
    transition: opacity 0.3s ease-out !important;
  }
  
  .visual-effects-flow {
    filter: none !important;
  }
}

/* Performance mode optimizations */
.bilateral-visual-effects-container[data-optimization-mode="performance"] {
  --sidebar-animation-quality: 0.5;
  
  .visual-effects-flow {
    filter: none;
    animation: none;
  }
  
  .sidebar-spatial-layer {
    filter: none;
  }
}

/* High-end quality mode */
.bilateral-visual-effects-container[data-optimization-mode="quality"] {
  --sidebar-animation-quality: 1;
  
  .visual-effects-flow {
    background-size: 400% 400%;
    filter: blur(calc(2px * (1 - var(--sidebar-flow-fluidity, 0.7)))) 
           contrast(1.1);
  }
}

/* ============================================================================ */
/* ACCESSIBILITY ENHANCEMENTS */
/* ============================================================================ */

/* High contrast mode support */
@media (prefers-contrast: high) {
  .bilateral-visual-effects-container {
    --sidebar-flow-intensity: 0.8;
    filter: contrast(1.5);
  }
  
  .visual-effects-flow {
    opacity: 0.9;
  }
}

/* Dark mode enhancements */
@media (prefers-color-scheme: dark) {
  :root {
    --sidebar-visual-effects-gradient-primary: linear-gradient(
      var(--sidebar-flow-direction, 0deg),
      rgba(var(--spice-rgb-accent, 203, 214, 244), calc(var(--sidebar-flow-intensity, 0.5) * 0.7)) 0%,
      rgba(var(--spice-rgb-accent, 203, 214, 244), calc(var(--sidebar-flow-intensity, 0.5) * 0.2)) 50%,
      transparent 100%
    );
  }
}

/* Print styles */
@media print {
  .bilateral-visual-effects-container,
  .visual-effects-flow {
    display: none !important;
  }
}