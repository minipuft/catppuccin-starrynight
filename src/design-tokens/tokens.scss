/**
 * Design Token System - Catppuccin StarryNight
 * 
 * Unified design token source providing structured, namespaced CSS custom properties
 * for the Year 3000 System architecture. All visual systems derive from these tokens.
 * 
 * @architecture Year3000System
 * @performance Critical variables bypass CSSVariableBatcher for real-time updates
 * @accessibility All tokens support prefers-reduced-motion and color contrast requirements
 */

@use "../core/mixins" as *;

// =============================================================================
// CORE SYSTEM TOKENS
// =============================================================================

:root {
  // -------------------------------------------------------------------------
  // Background System (--sn.bg.*) 
  // -------------------------------------------------------------------------
  
  // WebGL/WebGPU Status
  --sn.bg.webgl.ready: 0;
  --sn.bg.webgpu.ready: 0;
  --sn.bg.active-backend: "css"; // "css" | "webgl" | "webgpu"
  
  // Gradient Configuration
  --sn.bg.gradient.primary.rgb: var(--spice-rgb-accent, 139, 233, 253);
  --sn.bg.gradient.secondary.rgb: var(--spice-rgb-base, 17, 17, 27);
  --sn.bg.gradient.accent.rgb: var(--spice-rgb-accent, 139, 233, 253);
  --sn.bg.gradient.opacity: 0.8;
  --sn.bg.gradient.blur: 120px;
  --sn.bg.gradient.saturation: 1.2;
  --sn.bg.gradient.brightness: 1.0;
  --sn.bg.gradient.contrast: 1.1;
  
  // Gradient Flow Animation
  --sn.bg.gradient.flow.x: 0;
  --sn.bg.gradient.flow.y: 0;
  --sn.bg.gradient.flow.scale: 1.0;
  --sn.bg.gradient.flow.speed: 1.0;
  
  // Nebula Layer System  
  --sn.bg.nebula.layer.0.opacity: 0.3;
  --sn.bg.nebula.layer.1.opacity: 0.2;
  --sn.bg.nebula.layer.2.opacity: 0.15;
  --sn.bg.nebula.layer.3.opacity: 0.1;
  --sn.bg.nebula.max-blur: 40px;
  
  // Particle System
  --sn.bg.particle.density: 0.6;
  --sn.bg.particle.energy.intensity: 0;
  --sn.bg.particle.cluster.size: 1.0;
  --sn.bg.particle.network.opacity: 0.4;
  --sn.bg.particle.focus.dampening: 0.8;
  
  // -------------------------------------------------------------------------
  // Music System (--sn.music.*) - Critical Real-time Variables
  // -------------------------------------------------------------------------
  
  // Beat Synchronization (Fast-path in CSSVariableBatcher)
  --sn.music.beat.pulse.intensity: 0; // ⚡ Real-time
  --sn.music.rhythm.phase: 0deg; // ⚡ Real-time  
  --sn.music.breathing.scale: 1.0; // ⚡ Real-time
  --sn.music.spectrum.phase: 0deg; // ⚡ Real-time
  
  // Music Analysis
  --sn.music.energy.level: 0.5;
  --sn.music.valence: 0.5;
  --sn.music.tempo.bpm: 120;
  --sn.music.intensity.boost: 1.0;
  --sn.music.sync.enabled: 1;
  
  // Micro-beat System
  --sn.music.micro.beat.intensity: 0;
  --sn.music.micro.rhythm.phase: 0deg;
  --sn.music.micro.breathing.scale: 1.0;
  
  // Feed & Content Response
  --sn.music.feed.bloom.intensity: 0;
  --sn.music.energy.modulation: 1.0;
  
  // -------------------------------------------------------------------------
  // Animation System (--sn.anim.*)
  // -------------------------------------------------------------------------
  
  // Easing Functions
  --sn.anim.easing.emergence: cubic-bezier(0.23, 1, 0.32, 1);
  --sn.anim.easing.organic: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  --sn.anim.easing.breathing: cubic-bezier(0.37, 0, 0.63, 1);
  --sn.anim.easing.harmony: cubic-bezier(0.165, 0.84, 0.44, 1);
  
  // Transition Durations
  --sn.anim.transition.fast: 200ms;
  --sn.anim.transition.standard: 400ms;
  --sn.anim.transition.slow: 800ms;
  --sn.anim.transition.cosmic: 1200ms;
  
  // 3D System
  --sn.anim.3d.depth.near: translateZ(10px);
  --sn.anim.3d.depth.mid: translateZ(20px);
  --sn.anim.3d.depth.far: translateZ(40px);
  --sn.anim.3d.perspective: 1000px;
  
  // Motion Intelligence
  --sn.anim.motion.intelligence.level: 3; // 0-5 scale
  --sn.anim.motion.reduced: 0; // 0 = full motion, 1 = reduced
  
  // -------------------------------------------------------------------------
  // Performance System (--sn.perf.*)
  // -------------------------------------------------------------------------
  
  // GPU & Hardware
  --sn.perf.gpu.acceleration.enabled: 1;
  --sn.perf.webgl.context.ready: 0;
  --sn.perf.webgpu.context.ready: 0;
  
  // Performance Modes
  --sn.perf.mode: "auto"; // "auto" | "high" | "medium" | "low"
  --sn.perf.fps.target: 60;
  --sn.perf.memory.optimization: 1;
  --sn.perf.batch.enabled: 1;
  
  // CDF (Cosmic Discovery Framework)
  --sn.perf.cdf.enabled: 1;
  --sn.perf.cdf.energy: 0.5;
  --sn.perf.cdf.scroll.ratio: 0;
  --sn.perf.cdf.aberration.strength: 0.1;
  
  // Quality Scaling
  --sn.perf.quality.particles: 1.0;
  --sn.perf.quality.shadows: 1.0;
  --sn.perf.quality.blur: 1.0;
  
  // -------------------------------------------------------------------------
  // UI Component System (--sn.ui.*)
  // -------------------------------------------------------------------------
  
  // Card System
  --sn.ui.card.energy.level: 0;
  --sn.ui.card.rhythm.phase: 0deg;
  --sn.ui.card.beat.intensity: 0;
  --sn.ui.card.constellation.opacity: 0.3;
  --sn.ui.card.harmonic.saturation: 1.0;
  --sn.ui.card.3d.enabled: 1;
  
  // Glass Effects
  --sn.ui.glass.opacity: 0.1;
  --sn.ui.glass.blur: 20px;
  --sn.ui.glass.pulse.enabled: 1;
  --sn.ui.glass.beat.opacity: 0;
  --sn.ui.glass.frost.intensity: 0.5;
  
  // Navigation System
  --sn.ui.nav.glow.intensity: 0;
  --sn.ui.nav.echo.opacity: 0;
  --sn.ui.nav.magnetic.pull: 1.0;
  --sn.ui.nav.neural.primary.rgb: 139, 233, 253;
  --sn.ui.nav.neural.secondary.rgb: 250, 179, 135;
  
  // Sidebar Consciousness
  --sn.ui.sidebar.consciousness.opacity: 0.8;
  --sn.ui.sidebar.consciousness.deep.rgb: 17, 17, 27;
  --sn.ui.sidebar.magnetic.hover.pull: 1.2;
  --sn.ui.sidebar.magnetic.focus.pull: 1.5;
  
  // Button System
  --sn.ui.button.cosmic.glow: 0;
  --sn.ui.button.energy.brightness: 1.0;
  --sn.ui.button.hologram.opacity: 0;
  
  // -------------------------------------------------------------------------
  // Text System (--sn.text.*)
  // -------------------------------------------------------------------------
  
  // Text Effects
  --sn.text.glow.intensity: 0; // ⚡ Dynamic via ColorHarmonyEngine
  --sn.text.gradient.angle: 45deg;
  --sn.text.energy.brightness: 1.0;
  --sn.text.rhythm.hue: 0deg;
  --sn.text.cosmic.blur: 0px;
  --sn.text.harmonic.saturation: 1.0;
  
  // Typography Scale  
  --sn.text.scale.xs: 0.75rem;
  --sn.text.scale.sm: 0.875rem;
  --sn.text.scale.base: 1rem;
  --sn.text.scale.lg: 1.125rem;
  --sn.text.scale.xl: 1.25rem;
  --sn.text.scale.2xl: 1.5rem;
  
  // -------------------------------------------------------------------------
  // Interaction System (--sn.ix.*)
  // -------------------------------------------------------------------------
  
  // Feedback Intensity
  --sn.ix.feedback.subtle: 0.2;
  --sn.ix.feedback.moderate: 0.5;
  --sn.ix.feedback.prominent: 0.8;
  
  // Ripple Effects
  --sn.ix.ripple.intensity: 0.6;
  --sn.ix.ripple.duration: 600ms;
  --sn.ix.ripple.color.rgb: var(--sn.bg.gradient.accent.rgb);
  
  // Magnetic Interactions
  --sn.ix.magnetic.hover.pull: 1.05;
  --sn.ix.magnetic.focus.pull: 1.1;
  --sn.ix.magnetic.active.pull: 0.95;
  
  // Temporal Echo System
  --sn.ix.echo.past.opacity: 0.3;
  --sn.ix.echo.present.opacity: 1.0;
  --sn.ix.echo.future.opacity: 0.1;
  
  // -------------------------------------------------------------------------
  // Color System (--sn.color.*) - Dynamic Accent Management
  // -------------------------------------------------------------------------
  
  // Dynamic Accent (⚡ Real-time via ColorHarmonyEngine)
  --sn.color.accent.hex: #8be9fd; // ⚡ Dynamic
  --sn.color.accent.rgb: 139, 233, 253; // ⚡ Dynamic
  
  // OKLab Processed Colors
  --sn.color.oklab.bright.highlight.rgb: 139, 233, 253;
  --sn.color.oklab.dynamic.shadow.rgb: 17, 17, 27;
  
  // Temporal Color System
  --sn.color.temporal.past.rgb: 98, 114, 164;
  --sn.color.temporal.present.rgb: var(--sn.color.accent.rgb);
  --sn.color.temporal.future.rgb: 139, 233, 253;
  
  // Consciousness Field Colors
  --sn.color.consciousness.deep.rgb: 17, 17, 27;
  --sn.color.consciousness.surface.rgb: 30, 30, 46;
  --sn.color.consciousness.glow.rgb: var(--sn.color.accent.rgb);
  
  // -------------------------------------------------------------------------
  // Layout System (--sn.layout.*)
  // -------------------------------------------------------------------------
  
  // Z-Index Management
  --sn.layout.z.background: -11;
  --sn.layout.z.nebula: -10;
  --sn.layout.z.particles: -9;
  --sn.layout.z.content: 0;
  --sn.layout.z.ui: 10;
  --sn.layout.z.modal: 100;
  
  // Spacing Scale
  --sn.layout.space.xs: 0.25rem;
  --sn.layout.space.sm: 0.5rem;
  --sn.layout.space.md: 1rem;
  --sn.layout.space.lg: 1.5rem;
  --sn.layout.space.xl: 2rem;
  --sn.layout.space.2xl: 3rem;
  
  // Border Radius
  --sn.layout.radius.sm: 4px;
  --sn.layout.radius.md: 8px;
  --sn.layout.radius.lg: 12px;
  --sn.layout.radius.xl: 16px;
  --sn.layout.radius.full: 9999px;
}

// =============================================================================
// ACCESSIBILITY OVERRIDES
// =============================================================================

@media (prefers-reduced-motion: reduce) {
  :root {
    // Disable all motion-sensitive variables
    --sn.music.beat.pulse.intensity: 0 !important;
    --sn.music.rhythm.phase: 0deg !important;
    --sn.music.breathing.scale: 1.0 !important;
    --sn.anim.motion.reduced: 1;
    
    // Use conservative transitions
    --sn.anim.transition.fast: 0ms;
    --sn.anim.transition.standard: 0ms;
    --sn.anim.transition.slow: 0ms;
    
    // Disable particle effects
    --sn.bg.particle.density: 0;
    --sn.perf.quality.particles: 0;
  }
}

@media (prefers-contrast: high) {
  :root {
    // Enhanced contrast ratios
    --sn.ui.glass.opacity: 0.3;
    --sn.text.glow.intensity: 0;
    --sn.bg.gradient.contrast: 1.5;
    --sn.color.consciousness.surface.rgb: 45, 45, 69;
  }
}

// =============================================================================
// LEGACY COMPATIBILITY ALIASES
// =============================================================================

:root {
  // Maintain backward compatibility during migration
  // These will be deprecated in v3.0
  
  // Critical real-time variables (Phase 1 migration)
  --sn-beat-pulse-intensity: var(--sn.music.beat.pulse.intensity);
  --sn-rhythm-phase: var(--sn.music.rhythm.phase);
  --sn-breathing-scale: var(--sn.music.breathing.scale);
  --sn-accent-hex: var(--sn.color.accent.hex);
  --sn-accent-rgb: var(--sn.color.accent.rgb);
  
  // Background system (Phase 2 migration)
  --sn-gradient-primary-rgb: var(--sn.bg.gradient.primary.rgb);
  --sn-gradient-secondary-rgb: var(--sn.bg.gradient.secondary.rgb);
  --sn-gradient-accent-rgb: var(--sn.bg.gradient.accent.rgb);
  --sn-gradient-flow-x: var(--sn.bg.gradient.flow.x);
  --sn-gradient-flow-y: var(--sn.bg.gradient.flow.y);
  --sn-webgl-ready: var(--sn.bg.webgl.ready);
  
  // UI Components (Phase 3 migration)
  --sn-text-glow-intensity: var(--sn.text.glow.intensity);
  --sn-glass-beat-opacity: var(--sn.ui.glass.beat.opacity);
  --card-energy-level: var(--sn.ui.card.energy.level);
}

// =============================================================================
// CATPPUCCIN FLAVOR INTEGRATION
// =============================================================================

// Default to Mocha flavor, other flavors override via color.ini
:root {
  // Base Catppuccin colors that integrate with dynamic system
  --catppuccin-base: #1e1e2e;
  --catppuccin-mantle: #181825;  
  --catppuccin-crust: #11111b;
  --catppuccin-surface0: #313244;
  --catppuccin-surface1: #45475a;
  --catppuccin-surface2: #585b70;
  --catppuccin-overlay0: #6c7086;
  --catppuccin-overlay1: #7f849c;
  --catppuccin-overlay2: #9399b2;
  --catppuccin-subtext0: #a6adc8;
  --catppuccin-subtext1: #bac2de;
  --catppuccin-text: #cdd6f4;
  
  // Map to system variables for consistency
  --sn.bg.gradient.secondary.rgb: 30, 30, 46; // catppuccin-base
  --sn.color.consciousness.deep.rgb: 17, 17, 27; // catppuccin-crust
  --sn.color.consciousness.surface.rgb: 49, 50, 68; // catppuccin-surface0
}