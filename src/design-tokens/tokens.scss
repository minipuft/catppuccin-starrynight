/**
 * Design Token System - Catppuccin StarryNight
 * 
 * Unified design token source providing structured, namespaced CSS custom properties
 * for the Year 3000 System architecture- All visual systems derive from these tokens-
 * 
 * @architecture Year3000System
 * @performance Critical variables bypass CSSVariableBatcher for real-time updates
 * @accessibility All tokens support prefers-reduced-motion and color contrast requirements
 */

@use "../core/mixins" as *;

// =============================================================================
// CORE SYSTEM TOKENS
// =============================================================================

:root {
  // -------------------------------------------------------------------------
  // Animation Stability System (--sn-rotation-*)
  // -------------------------------------------------------------------------

  // Global rotation control system - prevents UI shake and tilt
  --sn-rotation-disable: 0; /* Set to 1 to disable all rotations for stable UI */
  --sn-rotation-multiplier: calc(1 - var(--sn-rotation-disable, 0)); /* Multiplier for rotation values */

  // Animation intensity controls
  --sn-animation-intensity: 1; /* 0 = minimal, 1 = full effects */
  --sn-animation-reduce: 0; /* Set to 1 to reduce all animations */

  // -------------------------------------------------------------------------
  // Background System (--sn-bg-*)
  // -------------------------------------------------------------------------
  
  // WebGL/WebGPU Status
  --sn-bg-webgl-ready: 0;
  --sn-bg-webgpu-ready: 0;
  --sn-bg-active-backend: "css"; // "css" | "webgl" | "webgpu"
  
  // Gradient Configuration - cascades from dynamic > cosmic > spicetify
  --sn-bg-gradient-primary-rgb: var(--sn-dynamic-accent-rgb);
  --sn-bg-gradient-secondary-rgb: var(--sn-cosmic-secondary-rgb);
  --sn-bg-gradient-accent-rgb: var(--sn-dynamic-accent-rgb);
  --sn-bg-gradient-opacity: 0.8;
  --sn-bg-gradient-blur: 120px;
  
  // -------------------------------------------------------------------------
  // Brightness Mode System (--sn-brightness-*)
  // -------------------------------------------------------------------------
  
  // Brightness mode selection (bright/balanced/dark)
  --sn-brightness-mode: "dark"; // Default to dark mode for better UX
  
  // Bright mode values (current vibrant settings)
  --sn-brightness-bright-saturation: 1.6;
  --sn-brightness-bright-brightness: 1.3;
  --sn-brightness-bright-contrast: 1.4;
  --sn-brightness-bright-opacity: 0.28;
  
  // Balanced mode values (moderate settings)
  --sn-brightness-balanced-saturation: 1.2;
  --sn-brightness-balanced-brightness: 1.1;
  --sn-brightness-balanced-contrast: 1.1;
  --sn-brightness-balanced-opacity: 0.20;
  
  // Dark mode values (subtle but refined settings)
  --sn-brightness-dark-saturation: 1.1;
  --sn-brightness-dark-brightness: 1.0;
  --sn-brightness-dark-contrast: 1.0;
  --sn-brightness-dark-opacity: 0.15;
  
  // Active brightness values (set by brightness mode) - Default to dark mode for consistency
  --sn-bg-gradient-saturation: var(--sn-brightness-dark-saturation);
  --sn-bg-gradient-brightness: var(--sn-brightness-dark-brightness);
  --sn-bg-gradient-contrast: var(--sn-brightness-dark-contrast);
  
  // Gradient Flow Animation
  --sn-bg-gradient-flow-x: 0;
  --sn-bg-gradient-flow-y: 0;
  --sn-bg-gradient-flow-scale: 1.0;
  --sn-bg-gradient-flow-speed: 1.0;
  
  // Nebula Layer System  
  --sn-bg-nebula-layer-0-opacity: 0.3;
  --sn-bg-nebula-layer-1-opacity: 0.2;
  --sn-bg-nebula-layer-2-opacity: 0.15;
  --sn-bg-nebula-layer-3-opacity: 0.1;
  --sn-bg-nebula-max-blur: 40px;
  
  // Particle System
  --sn-bg-particle-density: 0.6;
  --sn-bg-particle-energy-intensity: 0;
  --sn-bg-particle-cluster-size: 1.0;
  --sn-bg-particle-network-opacity: 0.4;
  --sn-bg-particle-focus-dampening: 0.8;
  --sn-bg-particle-animation-speed: 8s; // Particle connection animation speed
  --sn-bg-particle-pulse-speed: 12s; // Particle pulse propagation speed
  
  // -------------------------------------------------------------------------
  // Music System (--sn-music-*) - Critical Real-time Variables
  // -------------------------------------------------------------------------
  
  // Beat Synchronization (Fast-path in CSSVariableBatcher)
  --sn-music-beat-pulse-intensity: 0; // ⚡ Real-time
  --sn-music-rhythm-phase: 0deg; // ⚡ Real-time  
  --sn-music-breathing-scale: 1.0; // ⚡ Real-time
  --sn-music-spectrum-phase: 0deg; // ⚡ Real-time
  
  // Music Analysis
  --sn-music-energy-level: 0.5;
  --sn-music-valence: 0.5;
  --sn-music-tempo-bpm: 120;
  --sn-music-intensity-boost: 1.0;
  --sn-music-sync-enabled: 1;
  
  // Micro-beat System
  --sn-music-micro-beat-intensity: 0;
  --sn-music-micro-rhythm-phase: 0deg;
  --sn-music-micro-breathing-scale: 1.0;
  
  // Feed & Content Response
  --sn-music-feed-bloom-intensity: 0;
  --sn-music-energy-modulation: 1.0;

  // Kinetic Music Analysis (AdvancedThemeSystem integration)
  --sn-kinetic-energy: 0;              // Processed energy level (0-1)
  --sn-kinetic-valence: 0.5;           // Valence/mood (0-1)
  --sn-kinetic-bpm: 120;               // Enhanced BPM
  --sn-kinetic-beat-interval: 500ms;   // Beat interval duration
  --sn-kinetic-animation-speed: 1.0;   // Animation speed multiplier

  // Musical Animation Coordination (Animation System Integration)
  --sn-anim-musical-beat-duration: calc(60s / var(--sn-music-tempo-bpm, 120)); // Beat-based animation duration
  --sn-anim-musical-measure-duration: calc(var(--sn-anim-musical-beat-duration) * 4); // Measure duration (4 beats)
  --sn-anim-musical-phrase-duration: calc(var(--sn-anim-musical-measure-duration) * 4); // Phrase duration (16 beats)
  --sn-anim-musical-color-transition: var(--sn-musical-transition-duration, 800ms); // Musical color transitions
  --sn-anim-musical-color-easing: var(--sn-musical-transition-easing, cubic-bezier(0.4, 0, 0.2, 1)); // Musical easing
  --sn-anim-musical-color-speed: var(--sn-musical-color-evolution-speed, 1.0); // Color evolution speed multiplier

  // Beat-Synchronized Animation Flags
  --sn-anim-beat-sync-enabled: 1; // Beat synchronization enabled (0=off, 1=on)
  --sn-anim-beat-sync-intensity: var(--sn-music-beat-pulse-intensity, 0); // Beat sync intensity (0-1)
  --sn-anim-beat-sync-phase: var(--sn-music-beat-phase, 0); // Beat sync phase (0-1 or degrees)

  // Beat-Synchronized Background Effects
  --sn-bg-beat-pulse-intensity: var(--sn-music-beat-color-pulse, 0); // Beat pulse intensity for backgrounds
  --sn-bg-beat-pulse-scale: calc(1 + var(--sn-music-beat-pulse-intensity, 0) * 0.1); // Beat-driven scale (1.0-1.1)
  --sn-bg-beat-color-shift: calc(var(--sn-music-beat-color-phase, 0) * 10deg); // Beat-driven hue shift
  --sn-bg-beat-pulse: var(--sn-bg-beat-pulse-intensity); // Alias for compatibility

  // -------------------------------------------------------------------------
  // Animation System (--sn-anim-*)
  // -------------------------------------------------------------------------
  
  // ⚠️ CONSOLIDATED: Animation durations now reference transition-duration tokens
  // These provide backward compatibility while unifying duration system
  --sn-anim-duration-fast: var(--sn-transition-fast-duration); // 150ms - Fast animations
  --sn-anim-duration-normal: var(--sn-transition-standard-duration); // 300ms - Normal animations
  --sn-anim-duration-slow: var(--sn-transition-slow-duration); // 500ms - Slow animations
  --sn-anim-duration-extended: var(--sn-anim-transition-cosmic); // 1200ms - Extended animation duration
  --sn-anim-duration-animation: 4s; // Legacy: Decorative animation duration (consider migrating)

  // Frame Budget & Performance Targeting
  --sn-anim-frame-budget: 16.67ms; // Target frame budget for 60fps (1000ms / 60)
  --sn-anim-frame-priority: normal; // Animation scheduling priority
  --sn-anim-frame-fps: 60; // Target frames per second

  // Motion Controls
  --sn-anim-motion-scale: 1; // Global animation scale multiplier (0-1)
  --sn-anim-motion-blur: 0; // Motion blur intensity (0-1)

  // Easing Functions
  --sn-anim-easing-emergence: cubic-bezier(0.23, 1, 0.32, 1);
  --sn-anim-easing-organic: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  --sn-anim-easing-breathing: cubic-bezier(0.37, 0, 0.63, 1);
  --sn-anim-easing-harmony: cubic-bezier(0.165, 0.84, 0.44, 1);
  --sn-anim-easing-standard: cubic-bezier(0.4, 0, 0.2, 1);
  --sn-anim-easing-decelerate: cubic-bezier(0, 0, 0.2, 1);
  --sn-anim-easing-accelerate: cubic-bezier(0.4, 0, 1, 1);
  --sn-anim-easing-bounce: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  --sn-anim-easing-visual-effects: cubic-bezier(0.4, 0, 0.2, 1); // Visual effects-aware easing
  --sn-anim-easing-bounce-playful: cubic-bezier(0.1, 0.7, 0.5, 1.3);
  --sn-anim-easing-elastic: cubic-bezier(0.2, 0.8, 0.2, 1);
  --sn-anim-easing-bounce-smooth: cubic-bezier(0.175, 0.885, 0.32, 1.4);
  --sn-anim-easing-bounce-medium: cubic-bezier(0.175, 0.885, 0.32, 1.375);
  --sn-anim-easing-bounce-gentle: cubic-bezier(0.175, 0.885, 0.32, 1.275);
  --sn-anim-easing-bounce-strong: cubic-bezier(0.175, 0.885, 0.32, 1.5);
  --sn-anim-easing-custom-1: cubic-bezier(0.4, 0, 0.6, 1);
  --sn-anim-easing-custom-2: cubic-bezier(0.34, 1.56, 0.64, 1);
  --sn-anim-easing-custom-3: cubic-bezier(0.68, -0.55, 0.265, 1.55);

  // === PRIMARY DURATION TOKENS (Source of Truth) ===
  // All animation/transition durations should reference these
  --sn-transition-fast-duration: 150ms; // Fast UI transitions
  --sn-transition-standard-duration: 300ms; // Standard UI transitions
  --sn-transition-slow-duration: 500ms; // Slow, deliberate transitions
  --sn-transition-extended-duration: 800ms; // Extended transitions
  --sn-anim-transition-cosmic: 1200ms; // Cosmic/atmospheric effects

  // Legacy transition names (backward compatibility)
  --sn-anim-transition-fast: var(--sn-transition-fast-duration);
  --sn-anim-transition-standard: var(--sn-transition-standard-duration);
  --sn-anim-transition-slow: var(--sn-transition-slow-duration);

  // Composite transition helpers (duration + timing function)
  --sn-transition-timing-default: var(--sn-easing-explorer, var(--sn-anim-easing-dynamic));
  --sn-transition-fast: var(--sn-transition-fast-duration) var(--sn-transition-timing-default);
  --sn-transition-standard: var(--sn-transition-standard-duration) var(--sn-transition-timing-default);
  --sn-transition-slow: var(--sn-transition-slow-duration) var(--sn-transition-timing-default);

  // Legacy easing aliases (forward to primary tokens)
  --sn-ease-bounce: var(--sn-anim-easing-bounce-gentle);
  --sn-ease-smooth: var(--sn-anim-easing-dynamic);
  --sn-ease-sharp: var(--sn-anim-easing-custom-1);
  
  // 3D System
  --sn-anim-3d-depth-near: translateZ(10px);
  --sn-anim-3d-depth-mid: translateZ(20px);
  --sn-anim-3d-depth-far: translateZ(40px);
  --sn-anim-3d-perspective: 1000px;
  
  // Motion Intelligence
  --sn-anim-motion-intelligence-level: 3; // 0.5 scale
  --sn-anim-motion-reduced: 0; // 0 = full motion, 1 = reduced
  
  // -------------------------------------------------------------------------
  // Performance System (--sn-perf-*)
  // -------------------------------------------------------------------------
  
  // GPU & Hardware
  --sn-perf-gpu-acceleration-enabled: 1;
  --sn-perf-webgl-context-ready: 0;
  --sn-perf-webgpu-context-ready: 0;
  
  // Performance Modes
  --sn-perf-mode: "auto"; // "auto" | "high" | "medium" | "low"
  --sn-perf-fps-target: 60;
  --sn-perf-memory-optimization: 1;
  --sn-perf-batch-enabled: 1;
  
  // CDF (Cosmic Discovery Framework)
  --sn-perf-cdf-enabled: 1;
  --sn-perf-cdf-energy: 0.5;
  --sn-perf-cdf-scroll-ratio: 0;
  --sn-perf-cdf-aberration-strength: 0.1;
  
  // Quality Scaling
  --sn-perf-quality-particles: 1.0;
  --sn-perf-quality-shadows: 1.0;
  --sn-perf-quality-blur: 1.0;
  
  // -------------------------------------------------------------------------
  // UI Component System (--sn-ui-*)
  // -------------------------------------------------------------------------
  
  // Card System
  --sn-ui-card-energy-level: 0;
  --sn-ui-card-rhythm-phase: 0deg;
  --sn-ui-card-beat-intensity: 0;
  --sn-ui-card-constellation-opacity: 0.3;
  --sn-ui-card-harmonic-saturation: 1.0;
  --sn-ui-card-3d-enabled: 1;
  
  // Glass Effects
  --sn-ui-glass-opacity: 0.1;
  --sn-ui-glass-blur: 20px;
  --sn-ui-glass-pulse-enabled: 1;
  --sn-ui-glass-beat-opacity: 0;
  --sn-ui-glass-frost-intensity: 0.5;
  --sn-ui-glass-float-distance: 15px; // Floating animation distance for glass elements
  
  // Navigation System
  --sn-ui-nav-glow-intensity: 0;
  --sn-ui-nav-echo-opacity: 0;
  --sn-ui-nav-magnetic-pull: 1.0;
  --sn-ui-nav-neural-primary-rgb: 139, 233, 253;
  --sn-ui-nav-neural-secondary-rgb: 250, 179, 135;

  // Echo Effects (SidebarVisualEffectsSystem integration)
  --sn-echo-radius-multiplier: 1.0;    // Echo radius scale
  --sn-echo-hue-shift: 0deg;           // Echo color hue shift
  --sn-echo-offset-x: 0px;             // Echo horizontal offset
  --sn-echo-offset-y: 0px;             // Echo vertical offset
  --sn-echo-skew: 0deg;                // Echo skew transformation
  --sn-echo-rotate: 0deg;              // Echo rotation angle
  
  // Sidebar Visual Effects
  --sn-ui-sidebar-visual-effects-opacity: 0.8;
  --sn-ui-sidebar-visual-effects-deep-rgb: 17, 17, 27;
  --sn-ui-sidebar-magnetic-hover-pull: 1.2;
  --sn-ui-sidebar-magnetic-focus-pull: 1.5;
  
  // Button System
  --sn-ui-button-accent-hex: var(--sn-accent-hex);
  --sn-ui-button-accent-rgb: var(--sn-accent-rgb);
  --sn-ui-button-cosmic-glow: 0;
  --sn-ui-button-energy-brightness: 1.0;
  --sn-ui-button-hologram-opacity: 0;
  
  // -------------------------------------------------------------------------
  // Text System (--sn-text-*)
  // -------------------------------------------------------------------------
  
  // Text Effects
  --sn-text-glow-intensity: 0; // ⚡ Dynamic via ColorHarmonyEngine
  --sn-text-gradient-angle: 45deg;
  --sn-text-energy-brightness: 1.0;
  --sn-text-rhythm-hue: 0deg;
  --sn-text-cosmic-blur: 0px;
  --sn-text-harmonic-saturation: 1.0;
  
  // Typography Scale  
  --sn-text-scale-xs: 0.75rem;
  --sn-text-scale-sm: 0.875rem;
  --sn-text-scale-base: 1rem;
  --sn-text-scale-lg: 1.125rem;
  --sn-text-scale-xl: 1.25rem;
  --sn-text-scale-2xl: 1.5rem;
  
  // -------------------------------------------------------------------------
  // Interaction System (--sn-ix-*)
  // -------------------------------------------------------------------------
  
  // Feedback Intensity
  --sn-ix-feedback-subtle: 0.2;
  --sn-ix-feedback-moderate: 0.5;
  --sn-ix-feedback-prominent: 0.8;
  
  // Ripple Effects
  --sn-ix-ripple-intensity: 0.6;
  --sn-ix-ripple-duration: 600ms;
  --sn-ix-ripple-color-rgb: var(--sn-bg-gradient-accent-rgb);
  
  // Magnetic Interactions
  --sn-ix-magnetic-hover-pull: 1.05;
  --sn-ix-magnetic-focus-pull: 1.1;
  --sn-ix-magnetic-active-pull: 0.95;
  
  // Temporal Echo System
  --sn-ix-echo-past-opacity: 0.3;
  --sn-ix-echo-present-opacity: 1.0;
  --sn-ix-echo-future-opacity: 0.1;
  
  // -------------------------------------------------------------------------
  // Color System (--sn-color-*) - StarryNight Cosmic Theme
  // -------------------------------------------------------------------------
  
  // === CATPPUCCIN THEME DEFAULTS ===
  // Catppuccin Mocha palette - used as fallbacks, will be dynamically updated by ColorStateManager
  // These values are replaced at runtime based on flavor + brightness mode selection
  --sn-cosmic-base-hex: #1e1e2e;                    // Catppuccin Mocha base
  --sn-cosmic-base-rgb: 30, 30, 46;                 // Catppuccin Mocha base RGB
  --sn-cosmic-surface-hex: #313244;                 // Catppuccin Mocha surface0
  --sn-cosmic-surface-rgb: 49, 50, 68;              // Catppuccin Mocha surface0 RGB
  --sn-cosmic-accent-hex: #cba6f7;                  // Catppuccin Mocha mauve (more balanced than cosmic purple)
  --sn-cosmic-accent-rgb: 203, 166, 247;            // Catppuccin Mocha mauve RGB
  --sn-cosmic-secondary-hex: #45475a;               // Catppuccin Mocha surface1
  --sn-cosmic-secondary-rgb: 69, 71, 90;            // Catppuccin Mocha surface1 RGB
  --sn-cosmic-text-hex: #cdd6f4;                    // Catppuccin Mocha text
  --sn-cosmic-text-rgb: 205, 214, 244;              // Catppuccin Mocha text RGB
  
  // === DYNAMIC COLOR VARIABLES ===
  // These are updated in real-time by ColorHarmonyEngine and music systems
  // When music is playing, these override cosmic defaults
  --sn-dynamic-accent-hex: var(--sn-cosmic-accent-hex);
  --sn-dynamic-accent-rgb: var(--sn-cosmic-accent-rgb);
  --sn-dynamic-primary-hex: var(--sn-cosmic-accent-hex);
  --sn-dynamic-primary-rgb: var(--sn-cosmic-accent-rgb);
  --sn-dynamic-secondary-hex: var(--sn-cosmic-secondary-hex);
  --sn-dynamic-secondary-rgb: var(--sn-cosmic-secondary-rgb);
  
  // === UNIFIED COLOR INTERFACE ===
  // Three-tier cascade: dynamic > cosmic > spicetify
  --sn-color-accent-hex: var(--sn-dynamic-accent-hex);
  --sn-color-accent-rgb: var(--sn-dynamic-accent-rgb);
  --sn-color-primary-hex: var(--sn-dynamic-primary-hex);
  --sn-color-primary-rgb: var(--sn-dynamic-primary-rgb);
  --sn-color-base-hex: var(--sn-cosmic-base-hex);
  --sn-color-base-rgb: var(--sn-cosmic-base-rgb);
  
  // === EXTRACTED COLORS FROM ALBUM ART ===
  // Updated by ColorHarmonyEngine during music playback
  --sn-color-extracted-primary-rgb: var(--sn-cosmic-accent-rgb);
  --sn-color-extracted-secondary-rgb: var(--sn-cosmic-secondary-rgb);
  --sn-color-extracted-tertiary-rgb: var(--sn-cosmic-surface-rgb);
  --sn-color-extracted-dominant-rgb: var(--sn-cosmic-accent-rgb);
  --sn-color-extracted-vibrant-rgb: var(--sn-cosmic-accent-rgb);
  
  // === COLOR HARMONY SYSTEM ===
  --sn-color-harmony-complementary-rgb: var(--sn-cosmic-secondary-rgb);
  --sn-color-harmony-analogous-rgb: var(--sn-cosmic-accent-rgb);
  --sn-color-harmony-triadic-rgb: var(--sn-cosmic-surface-rgb);
  --sn-color-harmony-blend-intensity: 0.8;
  
  // === BASE OKLAB COLORS (Source of Truth) ===
  // ⚠️ CONSOLIDATED Phase 4.2: Unified OKLAB namespace
  // Updated by ColorHarmonyEngine - perceptually uniform color processing
  --sn-oklab-primary-rgb: var(--sn-cosmic-accent-rgb);        // Primary OKLAB processed color
  --sn-oklab-accent-rgb: var(--sn-cosmic-accent-rgb);         // Accent OKLAB processed color
  --sn-oklab-highlight-rgb: var(--sn-cosmic-accent-rgb);      // Highlight OKLAB processed color
  --sn-oklab-shadow-rgb: var(--sn-cosmic-base-rgb);           // Shadow OKLAB processed color
  --sn-oklab-base-luminance: 0.08;                            // Base luminance (0-1)
  --sn-oklab-accent-luminance: 0.45;                          // Accent luminance (0-1)

  // Legacy aliases for backward compatibility (Phase 4.2)
  --sn-color-oklab-bright-highlight-rgb: var(--sn-oklab-highlight-rgb);
  --sn-color-oklab-dynamic-shadow-rgb: var(--sn-oklab-shadow-rgb);
  --sn-color-oklab-base-luminance: var(--sn-oklab-base-luminance);
  --sn-color-oklab-accent-luminance: var(--sn-oklab-accent-luminance);
  
  // === OKLCH COLOR SYSTEM ===
  // OKLCH (OKLab LCH) - Lightness, Chroma, Hue representation
  --sn-color-oklch-accent-l: 0.65;           // Lightness (0-1)
  --sn-color-oklch-accent-c: 0.15;           // Chroma (0-0.4 typical)
  --sn-color-oklch-accent-h: 295;            // Hue (0-360 degrees)
  --sn-color-oklch-primary-l: 0.65;          // Primary lightness
  --sn-color-oklch-primary-c: 0.15;          // Primary chroma  
  --sn-color-oklch-primary-h: 295;           // Primary hue
  
  // === MUSICAL OKLAB COORDINATION ===
  // Variables updated by MusicalOKLABCoordinator for real-time color processing
  --sn-musical-oklab-enabled: 1;             // Musical OKLAB coordination enabled (0/1)
  --sn-musical-oklab-preset-name: "STANDARD"; // Current OKLAB preset name
  --sn-musical-oklab-genre: "ambient";       // Detected music genre
  --sn-musical-oklab-emotion: "neutral";     // Primary detected emotion
  --sn-musical-oklab-intensity: 0.5;         // Musical influence intensity (0-1)
  
  // Musical OKLAB processed colors (updated in real-time)
  // Phase 5: Consolidated to delegate to base OKLAB tokens
  --sn-musical-oklab-primary-rgb: var(--sn-oklab-primary-rgb);
  --sn-musical-oklab-secondary-rgb: var(--sn-cosmic-secondary-rgb);
  --sn-musical-oklab-accent-rgb: var(--sn-oklab-accent-rgb);
  --sn-musical-oklab-highlight-rgb: var(--sn-oklab-highlight-rgb);
  --sn-musical-oklab-shadow-rgb: var(--sn-oklab-shadow-rgb);
  
  // === EMOTIONAL TEMPERATURE OKLAB VARIABLES ===
  // OKLAB-enhanced emotional color temperatures (perceptually uniform)
  
  // Calm/Meditative (warm, soothing) - OKLAB enhanced
  --sn-emotion-calm-oklab-primary-rgb: 255, 248, 220;
  --sn-emotion-calm-oklab-accent-rgb: 255, 218, 185;
  --sn-emotion-calm-oklab-atmosphere-rgb: 139, 125, 96;
  --sn-emotion-calm-oklab-luminance: 0.92;
  --sn-emotion-calm-oklab-chroma: 0.08;
  --sn-emotion-calm-oklab-hue: 85;
  
  // Energetic (bright, vibrant) - OKLAB enhanced
  --sn-emotion-energetic-oklab-primary-rgb: 255, 255, 255;
  --sn-emotion-energetic-oklab-accent-rgb: 173, 216, 230;
  --sn-emotion-energetic-oklab-atmosphere-rgb: 119, 136, 153;
  --sn-emotion-energetic-oklab-luminance: 1.0;
  --sn-emotion-energetic-oklab-chroma: 0.12;
  --sn-emotion-energetic-oklab-hue: 210;
  
  // Melancholy (deep, introspective) - OKLAB enhanced
  --sn-emotion-melancholy-oklab-primary-rgb: 255, 234, 191;
  --sn-emotion-melancholy-oklab-accent-rgb: 204, 153, 102;
  --sn-emotion-melancholy-oklab-atmosphere-rgb: 102, 87, 66;
  --sn-emotion-melancholy-oklab-luminance: 0.88;
  --sn-emotion-melancholy-oklab-chroma: 0.15;
  --sn-emotion-melancholy-oklab-hue: 70;
  
  // Happy (balanced, joyful) - OKLAB enhanced
  --sn-emotion-happy-oklab-primary-rgb: 255, 250, 240;
  --sn-emotion-happy-oklab-accent-rgb: 255, 228, 181;
  --sn-emotion-happy-oklab-atmosphere-rgb: 169, 169, 169;
  --sn-emotion-happy-oklab-luminance: 0.95;
  --sn-emotion-happy-oklab-chroma: 0.10;
  --sn-emotion-happy-oklab-hue: 60;
  
  // Aggressive (cool, intense) - OKLAB enhanced
  --sn-emotion-aggressive-oklab-primary-rgb: 201, 226, 255;
  --sn-emotion-aggressive-oklab-accent-rgb: 135, 206, 235;
  --sn-emotion-aggressive-oklab-atmosphere-rgb: 105, 105, 105;
  --sn-emotion-aggressive-oklab-luminance: 0.85;
  --sn-emotion-aggressive-oklab-chroma: 0.18;
  --sn-emotion-aggressive-oklab-hue: 240;
  
  // Mysterious (deep, enigmatic) - OKLAB enhanced
  --sn-emotion-mysterious-oklab-primary-rgb: 255, 214, 170;
  --sn-emotion-mysterious-oklab-accent-rgb: 138, 43, 226;
  --sn-emotion-mysterious-oklab-atmosphere-rgb: 75, 63, 48;
  --sn-emotion-mysterious-oklab-luminance: 0.78;
  --sn-emotion-mysterious-oklab-chroma: 0.25;
  --sn-emotion-mysterious-oklab-hue: 285;
  
  // Romantic (soft, intimate) - OKLAB enhanced
  --sn-emotion-romantic-oklab-primary-rgb: 255, 244, 229;
  --sn-emotion-romantic-oklab-accent-rgb: 255, 192, 203;
  --sn-emotion-romantic-oklab-atmosphere-rgb: 128, 108, 96;
  --sn-emotion-romantic-oklab-luminance: 0.90;
  --sn-emotion-romantic-oklab-chroma: 0.12;
  --sn-emotion-romantic-oklab-hue: 15;
  
  // Epic (grand, cinematic) - OKLAB enhanced
  --sn-emotion-epic-oklab-primary-rgb: 191, 211, 255;
  --sn-emotion-epic-oklab-accent-rgb: 255, 215, 0;
  --sn-emotion-epic-oklab-atmosphere-rgb: 112, 128, 144;
  --sn-emotion-epic-oklab-luminance: 0.80;
  --sn-emotion-epic-oklab-chroma: 0.22;
  --sn-emotion-epic-oklab-hue: 50;
  
  // Ambient (atmospheric, floating) - OKLAB enhanced
  --sn-emotion-ambient-oklab-primary-rgb: 255, 248, 220;
  --sn-emotion-ambient-oklab-accent-rgb: 176, 196, 222;
  --sn-emotion-ambient-oklab-atmosphere-rgb: 128, 128, 128;
  --sn-emotion-ambient-oklab-luminance: 0.85;
  --sn-emotion-ambient-oklab-chroma: 0.09;
  --sn-emotion-ambient-oklab-hue: 220;
  
  // === GENRE-SPECIFIC OKLAB PRESETS ===
  // OKLAB presets optimized for different music genres (updated by GenreProfileManager)
  
  // Electronic/EDM - Vibrant, high-energy OKLAB processing
  --sn-genre-electronic-oklab-preset: "COSMIC";
  --sn-genre-electronic-oklab-chroma-boost: 1.6;
  --sn-genre-electronic-oklab-lightness-boost: 1.2;
  --sn-genre-electronic-oklab-hue-shift: 15;
  --sn-genre-electronic-oklab-primary-rgb: var(--sn-emotion-energetic-oklab-primary-rgb);
  --sn-genre-electronic-oklab-accent-rgb: var(--sn-emotion-energetic-oklab-accent-rgb);
  
  // Classical - Subtle, refined OKLAB processing
  --sn-genre-classical-oklab-preset: "SUBTLE";
  --sn-genre-classical-oklab-chroma-boost: 1.1;
  --sn-genre-classical-oklab-lightness-boost: 1.05;
  --sn-genre-classical-oklab-hue-shift: 5;
  --sn-genre-classical-oklab-primary-rgb: var(--sn-emotion-romantic-oklab-primary-rgb);
  --sn-genre-classical-oklab-accent-rgb: var(--sn-emotion-romantic-oklab-accent-rgb);
  
  // Rock/Metal - Bold, intense OKLAB processing
  --sn-genre-rock-oklab-preset: "VIBRANT";
  --sn-genre-rock-oklab-chroma-boost: 1.4;
  --sn-genre-rock-oklab-lightness-boost: 1.1;
  --sn-genre-rock-oklab-hue-shift: 10;
  --sn-genre-rock-oklab-primary-rgb: var(--sn-emotion-aggressive-oklab-primary-rgb);
  --sn-genre-rock-oklab-accent-rgb: var(--sn-emotion-aggressive-oklab-accent-rgb);
  
  // Jazz - Sophisticated, warm OKLAB processing
  --sn-genre-jazz-oklab-preset: "STANDARD";
  --sn-genre-jazz-oklab-chroma-boost: 1.25;
  --sn-genre-jazz-oklab-lightness-boost: 1.08;
  --sn-genre-jazz-oklab-hue-shift: 8;
  --sn-genre-jazz-oklab-primary-rgb: var(--sn-emotion-mysterious-oklab-primary-rgb);
  --sn-genre-jazz-oklab-accent-rgb: var(--sn-emotion-mysterious-oklab-accent-rgb);
  
  // Hip-Hop/Rap - Dynamic, punchy OKLAB processing
  --sn-genre-hiphop-oklab-preset: "VIBRANT";
  --sn-genre-hiphop-oklab-chroma-boost: 1.5;
  --sn-genre-hiphop-oklab-lightness-boost: 1.15;
  --sn-genre-hiphop-oklab-hue-shift: 12;
  --sn-genre-hiphop-oklab-primary-rgb: var(--sn-emotion-epic-oklab-primary-rgb);
  --sn-genre-hiphop-oklab-accent-rgb: var(--sn-emotion-epic-oklab-accent-rgb);
  
  // Ambient/Drone - Atmospheric, ethereal OKLAB processing
  --sn-genre-ambient-oklab-preset: "SUBTLE";
  --sn-genre-ambient-oklab-chroma-boost: 1.05;
  --sn-genre-ambient-oklab-lightness-boost: 1.02;
  --sn-genre-ambient-oklab-hue-shift: 3;
  --sn-genre-ambient-oklab-primary-rgb: var(--sn-emotion-ambient-oklab-primary-rgb);
  --sn-genre-ambient-oklab-accent-rgb: var(--sn-emotion-ambient-oklab-accent-rgb);
  
  // Folk/Acoustic - Natural, warm OKLAB processing
  --sn-genre-folk-oklab-preset: "STANDARD";
  --sn-genre-folk-oklab-chroma-boost: 1.15;
  --sn-genre-folk-oklab-lightness-boost: 1.05;
  --sn-genre-folk-oklab-hue-shift: 5;
  --sn-genre-folk-oklab-primary-rgb: var(--sn-emotion-calm-oklab-primary-rgb);
  --sn-genre-folk-oklab-accent-rgb: var(--sn-emotion-calm-oklab-accent-rgb);
  
  // Pop - Balanced, pleasant OKLAB processing
  --sn-genre-pop-oklab-preset: "STANDARD";
  --sn-genre-pop-oklab-chroma-boost: 1.3;
  --sn-genre-pop-oklab-lightness-boost: 1.1;
  --sn-genre-pop-oklab-hue-shift: 8;
  --sn-genre-pop-oklab-primary-rgb: var(--sn-emotion-happy-oklab-primary-rgb);
  --sn-genre-pop-oklab-accent-rgb: var(--sn-emotion-happy-oklab-accent-rgb);
  
  // Default fallback genre - Balanced OKLAB processing
  --sn-genre-default-oklab-preset: "STANDARD";
  --sn-genre-default-oklab-chroma-boost: 1.2;
  --sn-genre-default-oklab-lightness-boost: 1.05;
  --sn-genre-default-oklab-hue-shift: 5;
  --sn-genre-default-oklab-primary-rgb: var(--sn-cosmic-accent-rgb);
  --sn-genre-default-oklab-accent-rgb: var(--sn-cosmic-accent-rgb);

  // === GENRE UI BRIDGE INTEGRATION ===
  // CSS variables for genre-aware UI styling (GenreUIBridge integration)
  --genre-primary-hue-min: 0;          // Primary hue range minimum
  --genre-primary-hue-max: 360;        // Primary hue range maximum
  --genre-saturation-base: 1.0;        // Base saturation level
  --genre-saturation-variation: 0.2;   // Saturation variation amount
  --genre-brightness-base: 1.0;        // Base brightness level
  --genre-brightness-variation: 0.1;   // Brightness variation amount
  
  // === TEMPORAL COLOR SYSTEM ===
  --sn-color-temporal-past-rgb: var(--sn-cosmic-secondary-rgb);
  --sn-color-temporal-present-rgb: var(--sn-color-accent-rgb);
  --sn-color-temporal-future-rgb: var(--sn-cosmic-accent-rgb);
  
  // === VISUAL EFFECTS FIELD COLORS ===
  --sn-color-visual-effects-deep-rgb: var(--sn-cosmic-base-rgb);
  --sn-color-visual-effects-surface-rgb: var(--sn-cosmic-surface-rgb);
  --sn-color-visual-effects-glow-rgb: var(--sn-color-accent-rgb);
  
  // -------------------------------------------------------------------------
  // Layout System (--sn-layout-*)
  // -------------------------------------------------------------------------
  
  // Z-Index Management
  --sn-layout-z-background: -11;
  --sn-layout-z-nebula: -10;
  --sn-layout-z-particles: -9;
  --sn-layout-z-content: 0;
  --sn-layout-z-ui: 10;
  --sn-layout-z-modal: 100;
  
  // Spacing Scale
  --sn-layout-space-xs: 0.25rem;
  --sn-layout-space-sm: 0.5rem;
  --sn-layout-space-md: 1rem;
  --sn-layout-space-lg: 1.5rem;
  --sn-layout-space-xl: 2rem;
  --sn-layout-space-2xl: 3rem;
  
  // Border Radius
  --sn-layout-radius-sm: 4px;
  --sn-layout-radius-md: 8px;
  --sn-layout-radius-lg: 12px;
  --sn-layout-radius-xl: 16px;
  --sn-layout-radius-full: 9999px;
  
  // -------------------------------------------------------------------------
  // Visual Effects Field System (--sn-visual-effects-*) - Magnetic Depth
  // -------------------------------------------------------------------------
  
  // 3D Perspective & Depth
  --sn-visual-effects-depth-field: 800px; // Comfortable 3D perspective for readability
  --sn-visual-effects-depth-approach: 20px;
  --sn-visual-effects-depth-recede: -10px;
  --sn-visual-effects-depth-neutral: 0px;
  
  // Magnetic Interaction Forces
  --sn-visual-effects-magnetic-hover-pull: 12px;
  --sn-visual-effects-magnetic-focus-pull: 18px;
  --sn-visual-effects-magnetic-interest-pull: 8px;
  --sn-visual-effects-magnetic-transition-speed: 0.6s;
  
  // Depth Hierarchy (translateZ values)
  --sn-visual-effects-depth-priority-high: translateZ(8px);
  --sn-visual-effects-depth-priority-medium: translateZ(4px);
  --sn-visual-effects-depth-priority-low: translateZ(0px);
  --sn-visual-effects-depth-priority-receded: translateZ(-6px);
  
  // Readability & Accessibility
  --sn-visual-effects-magnetic-max-rotation: 2deg;
  --sn-visual-effects-text-clarity: 1;
  --sn-visual-effects-contrast-boost: 1.05;
  
  // Field Dynamics
  --sn-visual-effects-field-intensity: 0.4;
  --sn-visual-effects-animation-rate: 12s;
  --sn-visual-effects-response-sensitivity: 0.8;
  
  // Performance & Mobile
  --sn-visual-effects-performance-mode: 1;
  --sn-visual-effects-accessibility-scale: 1;
  --sn-visual-effects-mobile-reduction: 0.6;
  
  // Enhanced Visual Effects Patterns (Year 3000 System Extensions)
  // Advanced animation and rendering concepts for sophisticated effects
  --sn-visual-effects-membrane-elasticity: 0.7; // Visual membrane deformation intensity (0-1)
  --sn-visual-effects-animation-scale: 0.8; // Animation scaling patterns (0-1)
  --sn-visual-effects-flow-rate: 0.5; // Cross-system visual flow (0-1)
  --sn-visual-effects-subdivision-frequency: 0.3; // Visual subdivision rate (0-1)
  --sn-visual-effects-flow-viscosity: 0.4; // Visual flow resistance (0-1)
  --sn-visual-effects-surface-tension: 0.6; // Visual surface tension (0-1)
  --sn-visual-effects-permeability: 0.6; // Visual effect permeability (0-1)
  
  // Visual effects modifier flags (extend existing systems without duplicating)
  --sn-visual-effects-advanced-mode: 1; // Enable advanced behavior in existing systems
  --sn-visual-effects-subdivision-mode: 1; // Enable subdivision patterns in existing systems
  
  // -------------------------------------------------------------------------
  // Serendipity Discovery System (--sn-serendipity-*)
  // -------------------------------------------------------------------------
  
  // Idle State Discovery
  --sn-serendipity-idle-threshold: 2000ms;
  --sn-serendipity-animation-duration: 600ms;
  --sn-serendipity-start-z: -60px;
  --sn-serendipity-end-z: -10px;
  
  // -------------------------------------------------------------------------
  // Glyph Consciousness System (--sn-glyph-*)
  // -------------------------------------------------------------------------
  
  // Core Glyph Controls
  --sn-glyph-intensity: 0; // 0.1 base intensity
  --sn-glyph-glow: 0; // 0.1 glow factor (usually intensity * 0.8)
  --sn-glyph-base-size: 6px;
  --sn-glyph-color-rgb: 140, 170, 238;
  --sn-glyph-rotation: 0deg;
  
  // -------------------------------------------------------------------------
  // Visual Effects Theme RGB Colors - Unified System
  // -------------------------------------------------------------------------
  
  // === YEAR3000 VISUAL THEME SYSTEM ===
  // Cyberpunk aesthetic themes mapped to Catppuccin palette for design consistency
  // Visual Guide: Ethereal (soft glow), Natural (organic), Cinematic (dramatic energy)
  
  // Ethereal theme colors (soft glow effects) - Mapped to Catppuccin
  --sn-theme-ethereal-soft-rgb: var(--spice-rgb-mauve);      // Soft primary glow
  --sn-theme-ethereal-mystical-rgb: var(--spice-rgb-teal);   // Mystical glow accent
  --sn-theme-ethereal-dreamy-rgb: var(--spice-rgb-rosewater); // Dreamy mist overlay
  --sn-theme-ethereal-emotional-rgb: var(--spice-rgb-yellow); // Emotional heart pulse
  --sn-theme-ethereal-highlight-rgb: var(--spice-rgb-lavender); // Ethereal highlight
  
  // Natural theme colors (organic nature effects) - Mapped to Catppuccin
  --sn-theme-natural-earthy-rgb: var(--spice-rgb-green);     // Spring earthy base
  --sn-theme-natural-forest-rgb: var(--spice-rgb-green);     // Deep forest (same as earthy for consistency)
  --sn-theme-natural-sky-rgb: var(--spice-rgb-sky);          // Natural sky blue
  --sn-theme-natural-sunset-rgb: var(--spice-rgb-peach);     // Sunset glow warmth
  --sn-theme-natural-stone-rgb: var(--spice-rgb-overlay0);   // Stone gray base
  
  // Cinematic theme colors (dramatic energy burst effects) - Mapped to Catppuccin
  --sn-theme-cinematic-red-rgb: var(--spice-rgb-red);        // Cinematic energy burst
  --sn-theme-cinematic-amber-rgb: var(--spice-rgb-peach);    // Amber glow (warm accent)
  --sn-theme-cinematic-blue-rgb: var(--spice-rgb-blue);      // Cool energy accent
  --sn-theme-cinematic-cyan-rgb: var(--spice-rgb-teal);      // Cyan effects highlight
  
  // Unified breathing animation durations
  --sn-anim-breathing-gentle: 4000ms;     // Calm, meditative breathing
  --sn-anim-breathing-energetic: 2000ms;  // Active, dynamic breathing
  --sn-anim-breathing-cosmic: 6000ms;     // Deep, cosmic breathing
  --sn-anim-breathing-effects: var(--sn-anim-transition-cosmic, 1200ms); // Effects breathing
}

// =============================================================================
// ACCESSIBILITY OVERRIDES
// =============================================================================

@media (prefers-reduced-motion: reduce) {
  :root {
    // Disable all motion-sensitive variables
    --sn-music-beat-pulse-intensity: 0 !important;
    --sn-music-rhythm-phase: 0deg !important;
    --sn-music-breathing-scale: 1.0 !important;
    --sn-anim-motion-reduced: 1;
    
    // Use conservative transitions
    --sn-anim-transition-fast: 0ms;
    --sn-anim-transition-standard: 0ms;
    --sn-anim-transition-slow: 0ms;
    
    // Disable particle effects
    --sn-bg-particle-density: 0;
    --sn-perf-quality-particles: 0;
    
    // Reduce visual effects field motion
    --sn-visual-effects-magnetic-hover-pull: 4px;
    --sn-visual-effects-magnetic-focus-pull: 6px;
    --sn-visual-effects-magnetic-transition-speed: 1.2s;
    --sn-visual-effects-animation-rate: 30s;
    --sn-visual-effects-field-intensity: 0.2;
  }
}

@media (prefers-contrast: high) {
  :root {
    // Enhanced contrast ratios
    --sn-ui-glass-opacity: 0.3;
    --sn-text-glow-intensity: 0;
    --sn-bg-gradient-contrast: 1.5;
    --sn-color-visual-effects-surface-rgb: 45, 45, 69;
  }
}

// =============================================================================
// LEGACY COMPATIBILITY ALIASES
// =============================================================================
// Phase 3 Audit completed: 2025-10-03
// Total aliases: ~70 | Active usage: ~210 occurrences | Zero usage: ~50 aliases (71%)
//
// DEPRECATION POLICY:
// - All aliases will be removed in v4.0.0 (Phase 6)
// - SCSS migration (Phase 4) required before removal
// - See docs/LEGACY_TOKEN_MIGRATION.md for migration guide
//
// RISK CATEGORIZATION:
// 🔴 UNSAFE: High usage (100+ occurrences) - Requires Phase 4 migration
// 🟡 RISKY: Medium usage (10-50 occurrences) - Phase 4 migration recommended
// ✅ SAFE: Zero usage - Can be removed in Phase 6 without migration
// =============================================================================

:root {
  // ---------------------------------------------------------------------------
  // MUSIC SYSTEM ALIASES
  // Phase 1 migration complete | Status: Zero SCSS usage
  // ---------------------------------------------------------------------------

  /* @deprecated Phase 3 - Use --sn-music-beat-pulse-intensity instead
     Usage: 0 files (TypeScript-only variable)
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --sn-beat-pulse-intensity: var(--sn-music-beat-pulse-intensity);

  /* @deprecated Phase 3 - Use --sn-music-rhythm-phase instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --sn-rhythm-phase: var(--sn-music-rhythm-phase);

  /* @deprecated Phase 3 - Use --sn-music-breathing-scale instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --sn-breathing-scale: var(--sn-music-breathing-scale);

  // ---------------------------------------------------------------------------
  // COLOR SYSTEM ALIASES
  // Active usage detected | Requires Phase 4 migration
  // ---------------------------------------------------------------------------

  /* @deprecated Phase 3 - Use --sn-color-accent-hex instead
     Usage: 1 file
     Risk: 🟡 RISKY
     Migration: Phase 4 target
     Removal: Phase 6 (v4.0.0) */
  --sn-accent-hex: var(--sn-color-accent-hex);

  /* @deprecated Phase 3 - Use --sn-color-accent-rgb instead
     Usage: 12 occurrences across multiple files
     Risk: 🟡 RISKY
     Migration: Phase 4 target
     Removal: Phase 6 (v4.0.0) */
  --sn-accent-rgb: var(--sn-color-accent-rgb);
  
  /* @deprecated Phase 3 - Use --sn-dynamic-accent-hex instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --sn-dynamic-accent: var(--sn-dynamic-accent-hex);

  /* @deprecated Phase 3 - Use --sn-cosmic-accent-hex instead
     Usage: 34 occurrences (internal delegation only in tokens.scss)
     Risk: ✅ SAFE (no external SCSS usage)
     Removal: Phase 6 (v4.0.0) */
  --sn-cosmic-accent: var(--sn-cosmic-accent-hex);

  /* @deprecated Phase 3 - Use --sn-cosmic-base-hex instead
     Usage: Internal delegation only in tokens.scss
     Risk: ✅ SAFE (no external SCSS usage)
     Removal: Phase 6 (v4.0.0) */
  --sn-cosmic-base: var(--sn-cosmic-base-hex);

  // ---------------------------------------------------------------------------
  // OKLAB PROCESSED ALIASES
  // Phase 5 consolidated to base OKLAB | Low usage
  // ---------------------------------------------------------------------------

  /* @deprecated Phase 3 - Use --sn-oklab-primary-rgb instead
     Usage: 3 occurrences in 2 files
     Risk: ✅ SAFE (Phase 5 consolidated)
     Removal: Phase 6 (v4.0.0) */
  --sn-oklab-processed-primary-rgb: var(--sn-oklab-primary-rgb);

  /* @deprecated Phase 3 - Use --sn-oklab-accent-rgb instead
     Usage: 3 occurrences in 2 files
     Risk: ✅ SAFE (Phase 5 consolidated)
     Removal: Phase 6 (v4.0.0) */
  --sn-oklab-processed-accent-rgb: var(--sn-oklab-accent-rgb);

  /* @deprecated Phase 3 - Use --sn-oklab-base-luminance instead
     Usage: 3 occurrences in 2 files
     Risk: ✅ SAFE (Phase 5 consolidated)
     Removal: Phase 6 (v4.0.0) */
  --sn-oklab-processed-dynamic-base-luminance: var(--sn-oklab-base-luminance);

  // Note: --sn-oklab-processed-bright-highlight-rgb and --sn-oklab-processed-dynamic-shadow-rgb
  // were already removed - all usages migrated to oklab-color() helper or canonical variable names

  // ---------------------------------------------------------------------------
  // BACKGROUND GRADIENT SYSTEM ALIASES
  // Phase 2 migration | CRITICAL USAGE: 152 occurrences across 13 files
  // ---------------------------------------------------------------------------

  /* @deprecated Phase 3 - Use --sn-bg-gradient-primary-rgb instead
     Usage: 48 occurrences across 13 files
     Risk: 🔴 UNSAFE - CRITICAL USAGE
     Migration: Phase 4 REQUIRED (incremental file-by-file)
     Removal: Phase 6 (v4.0.0) after Phase 4 complete */
  --sn-gradient-primary-rgb: var(--sn-bg-gradient-primary-rgb);

  /* @deprecated Phase 3 - Use --sn-bg-gradient-secondary-rgb instead
     Usage: 27 occurrences across 13 files
     Risk: 🔴 UNSAFE - CRITICAL USAGE
     Migration: Phase 4 REQUIRED
     Removal: Phase 6 (v4.0.0) after Phase 4 complete */
  --sn-gradient-secondary-rgb: var(--sn-bg-gradient-secondary-rgb);

  /* @deprecated Phase 3 - Use --sn-bg-gradient-accent-rgb instead
     Usage: 48 occurrences across 13 files
     Risk: 🔴 UNSAFE - CRITICAL USAGE
     Migration: Phase 4 REQUIRED
     Removal: Phase 6 (v4.0.0) after Phase 4 complete */
  --sn-gradient-accent-rgb: var(--sn-bg-gradient-accent-rgb);

  /* @deprecated Phase 3 - Use --sn-bg-gradient-flow-x instead
     Usage: Multiple files
     Risk: 🔴 UNSAFE
     Migration: Phase 4 REQUIRED
     Removal: Phase 6 (v4.0.0) after Phase 4 complete */
  --sn-gradient-flow-x: var(--sn-bg-gradient-flow-x);

  /* @deprecated Phase 3 - Use --sn-bg-gradient-flow-y instead
     Usage: Multiple files
     Risk: 🔴 UNSAFE
     Migration: Phase 4 REQUIRED
     Removal: Phase 6 (v4.0.0) after Phase 4 complete */
  --sn-gradient-flow-y: var(--sn-bg-gradient-flow-y);

  /* @deprecated Phase 3 - Use --sn-bg-webgl-ready instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --sn-webgl-ready: var(--sn-bg-webgl-ready);
  
  // ---------------------------------------------------------------------------
  // UI COMPONENT ALIASES
  // Phase 3 migration | Mixed usage
  // ---------------------------------------------------------------------------

  /* @deprecated Phase 3 - Use --sn-text-glow-intensity instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --text-glow-intensity: var(--sn-text-glow-intensity);

  /* @deprecated Phase 3 - Use --sn-ui-glass-beat-opacity instead
     Usage: 8 occurrences in 1 file (_beat_sync_glassmorphism.scss)
     Risk: ✅ SAFE (single file migration)
     Migration: Phase 4 target
     Removal: Phase 6 (v4.0.0) */
  --sn-glass-beat-opacity: var(--sn-ui-glass-beat-opacity);

  /* @deprecated Phase 3 - Use --sn-ui-card-energy-level instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --card-energy-level: var(--sn-ui-card-energy-level);
  
  // ---------------------------------------------------------------------------
  // VISUAL EFFECTS FIELD SYSTEM ALIASES
  // Phase 4 migration | Zero usage - Safe for removal
  // ---------------------------------------------------------------------------

  /* @deprecated Phase 3 - Use --sn-visual-effects-depth-field instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --magnetic-depth-field: var(--sn-visual-effects-depth-field);

  /* @deprecated Phase 3 - Use --sn-visual-effects-depth-approach instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --magnetic-approach-distance: var(--sn-visual-effects-depth-approach);

  /* @deprecated Phase 3 - Use --sn-visual-effects-depth-recede instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --magnetic-recede-distance: var(--sn-visual-effects-depth-recede);

  /* @deprecated Phase 3 - Use --sn-visual-effects-depth-neutral instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --magnetic-neutral-position: var(--sn-visual-effects-depth-neutral);

  /* @deprecated Phase 3 - Use --sn-visual-effects-magnetic-hover-pull instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --magnetic-hover-pull: var(--sn-visual-effects-magnetic-hover-pull);

  /* @deprecated Phase 3 - Use --sn-visual-effects-magnetic-focus-pull instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --magnetic-focus-pull: var(--sn-visual-effects-magnetic-focus-pull);

  /* @deprecated Phase 3 - Use --sn-visual-effects-magnetic-interest-pull instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --magnetic-interest-pull: var(--sn-visual-effects-magnetic-interest-pull);

  /* @deprecated Phase 3 - Use --sn-visual-effects-magnetic-transition-speed instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --magnetic-transition-speed: var(--sn-visual-effects-magnetic-transition-speed);

  /* @deprecated Phase 3 - Use --sn-visual-effects-field-intensity instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --visual-effects-field-intensity: var(--sn-visual-effects-field-intensity);

  /* @deprecated Phase 3 - Use --sn-visual-effects-animation-rate instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --visual-effects-animation-rate: var(--sn-visual-effects-animation-rate);

  /* @deprecated Phase 3 - Use --sn-visual-effects-response-sensitivity instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --visual-effects-response-sensitivity: var(--sn-visual-effects-response-sensitivity);
  
  // ---------------------------------------------------------------------------
  // ENHANCED VISUAL EFFECTS ALIASES (Year 3000 System)
  // Zero usage - Safe for removal
  // ---------------------------------------------------------------------------

  /* @deprecated Phase 3 - Use --sn-visual-effects-membrane-elasticity instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --visual-effects-membrane-elasticity: var(--sn-visual-effects-membrane-elasticity);

  /* @deprecated Phase 3 - Use --sn-visual-effects-animation-scale instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --visual-effects-animation-scale: var(--sn-visual-effects-animation-scale);

  /* @deprecated Phase 3 - Use --sn-visual-effects-flow-rate instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --visual-effects-flow-rate: var(--sn-visual-effects-flow-rate);

  /* @deprecated Phase 3 - Use --sn-visual-effects-subdivision-frequency instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --visual-effects-subdivision-frequency: var(--sn-visual-effects-subdivision-frequency);

  /* @deprecated Phase 3 - Use --sn-visual-effects-flow-viscosity instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --visual-effects-flow-viscosity: var(--sn-visual-effects-flow-viscosity);

  /* @deprecated Phase 3 - Use --sn-visual-effects-surface-tension instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --visual-effects-surface-tension: var(--sn-visual-effects-surface-tension);

  /* @deprecated Phase 3 - Use --sn-visual-effects-permeability instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --visual-effects-permeability: var(--sn-visual-effects-permeability);

  /* @deprecated Phase 3 - Use --sn-visual-effects-advanced-mode instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --visual-effects-advanced-mode: var(--sn-visual-effects-advanced-mode);

  /* @deprecated Phase 3 - Use --sn-visual-effects-subdivision-mode instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --visual-effects-subdivision-mode: var(--sn-visual-effects-subdivision-mode);

  // ---------------------------------------------------------------------------
  // DEPTH PRIORITY SYSTEM ALIASES
  // Zero usage - Safe for removal
  // ---------------------------------------------------------------------------

  /* @deprecated Phase 3 - Use --sn-visual-effects-depth-priority-high instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --depth-priority-high: var(--sn-visual-effects-depth-priority-high);

  /* @deprecated Phase 3 - Use --sn-visual-effects-depth-priority-medium instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --depth-priority-medium: var(--sn-visual-effects-depth-priority-medium);

  /* @deprecated Phase 3 - Use --sn-visual-effects-depth-priority-low instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --depth-priority-low: var(--sn-visual-effects-depth-priority-low);

  /* @deprecated Phase 3 - Use --sn-visual-effects-depth-priority-receded instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --depth-priority-receded: var(--sn-visual-effects-depth-priority-receded);

  // ---------------------------------------------------------------------------
  // GLYPH SYSTEM ALIASES
  // Zero usage | Pass-through aliases for potential future glyph system
  // ---------------------------------------------------------------------------

  /* @deprecated Phase 3 - Use --sn-glyph-intensity instead
     Usage: 0 files
     Risk: ✅ SAFE
     Note: Pass-through alias for future glyph system
     Removal: Phase 6 (v4.0.0) */
  --glyph-intensity: var(--sn-glyph-intensity);

  /* @deprecated Phase 3 - Use --sn-glyph-glow instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --glyph-glow: var(--sn-glyph-glow);

  /* @deprecated Phase 3 - Use --sn-glyph-base-size instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --glyph-base-size: var(--sn-glyph-base-size);

  /* @deprecated Phase 3 - Use --sn-glyph-color-rgb instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --glyph-color-rgb: var(--sn-glyph-color-rgb);

  /* @deprecated Phase 3 - Use --sn-glyph-rotation instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --glyph-rotation: var(--sn-glyph-rotation);

  // ---------------------------------------------------------------------------
  // SERENDIPITY SYSTEM ALIASES
  // Zero usage - Safe for removal
  // ---------------------------------------------------------------------------

  /* @deprecated Phase 3 - Use --sn-serendipity-idle-threshold instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --serendipity-idle-threshold: var(--sn-serendipity-idle-threshold);

  /* @deprecated Phase 3 - Use --sn-serendipity-animation-duration instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --serendipity-animation-duration: var(--sn-serendipity-animation-duration);

  /* @deprecated Phase 3 - Use --sn-serendipity-start-z instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --serendipity-start-z: var(--sn-serendipity-start-z);

  /* @deprecated Phase 3 - Use --sn-serendipity-end-z instead
     Usage: 0 files
     Risk: ✅ SAFE
     Removal: Phase 6 (v4.0.0) */
  --serendipity-end-z: var(--sn-serendipity-end-z);
  
  // ---------------------------------------------------------------------------
  // VISUAL EFFECTS OKLAB INTEGRATION ALIASES
  // Phase 5 consolidated | Medium usage across 5 files
  // ---------------------------------------------------------------------------

  /* @deprecated Phase 3 - Use --sn-oklab-primary-rgb instead
     Usage: 5 occurrences in 5 files (_living_gradients, _translucent_overlays, etc.)
     Risk: 🟡 RISKY (Phase 5 consolidated, but SCSS still uses legacy)
     Migration: Phase 4 target
     Removal: Phase 6 (v4.0.0) */
  --visual-effects-oklab-primary-rgb: var(--sn-oklab-primary-rgb);

  /* @deprecated Phase 3 - Use --sn-oklab-accent-rgb instead
     Usage: 5 occurrences in 5 files
     Risk: 🟡 RISKY (Phase 5 consolidated, but SCSS still uses legacy)
     Migration: Phase 4 target
     Removal: Phase 6 (v4.0.0) */
  --visual-effects-oklab-accent-rgb: var(--sn-oklab-accent-rgb);

  /* @deprecated Phase 3 - Use --sn-oklab-highlight-rgb instead
     Usage: 2 occurrences
     Risk: 🟡 RISKY (Phase 5 consolidated, but SCSS still uses legacy)
     Migration: Phase 4 target
     Removal: Phase 6 (v4.0.0) */
  --visual-effects-oklab-highlight-rgb: var(--sn-oklab-highlight-rgb);

  /* @deprecated Phase 3 - Use --sn-oklab-shadow-rgb instead
     Usage: 1 occurrence
     Risk: 🟡 RISKY (Phase 5 consolidated, but SCSS still uses legacy)
     Migration: Phase 4 target
     Removal: Phase 6 (v4.0.0) */
  --visual-effects-oklab-shadow-rgb: var(--sn-oklab-shadow-rgb);

  /* @deprecated Phase 3 - Use --sn-oklab-accent-luminance instead
     Usage: 8 occurrences
     Risk: 🟡 RISKY (Phase 5 consolidated, but SCSS still uses legacy)
     Migration: Phase 4 target
     Removal: Phase 6 (v4.0.0) */
  --visual-effects-oklab-luminance: var(--sn-oklab-accent-luminance);

  /* @deprecated Phase 3 - Literal value, consider using a semantic token
     Usage: 11 occurrences
     Risk: 🟡 RISKY
     Note: Not a true alias, but a literal value that should be migrated to semantic token
     Migration: Phase 4 consideration
     Removal: Consider refactoring to --sn-oklab-default-chroma */
  --visual-effects-oklab-chroma: 0.15; // Default chroma for visual effects

  /* @deprecated Phase 3 - Literal value, consider using a semantic token
     Usage: 4 occurrences
     Risk: 🟡 RISKY
     Note: Not a true alias, but a literal value that should be migrated to semantic token
     Migration: Phase 4 consideration
     Removal: Consider refactoring to --sn-oklab-default-hue */
  --visual-effects-oklab-hue: 280; // Default visual effects hue (purple-like)

  // ---------------------------------------------------------------------------
  // VISUAL EFFECTS CSS FALLBACK COORDINATION
  // Literal values - not legacy aliases
  // ---------------------------------------------------------------------------

  /* Note: These are configuration flags, not legacy aliases
     Status: ACTIVE (not deprecated)
     Purpose: CSS fallback system coordination */
  --visual-effects-css-fallback: 1.0; // CSS fallback system enabled
  --visual-effects-webgl-coordination: 0; // WebGL coordination level
}

// =============================================================================
// END LEGACY COMPATIBILITY ALIASES
// =============================================================================
// Phase 3 deprecation documentation complete
// All ~70 legacy aliases now have deprecation notices with usage data
// Next step: Phase 4 SCSS migration for high-usage aliases
// =============================================================================

// =============================================================================
// SPICETIFY THEME INTEGRATION
// =============================================================================

// StarryNight integrates with any Spicetify theme as the base layer
// The cosmic colors serve as neutral fallbacks that work with any theme
:root {
  // Spicetify variable bridge - these get overridden by user's theme
  --spicetify-base: var(--spice-base, var(--sn-cosmic-base-hex));
  --spicetify-surface: var(--spice-surface1, var(--sn-cosmic-surface-hex));
  --spicetify-accent: var(--spice-accent, var(--sn-cosmic-accent-hex));
  --spicetify-text: var(--spice-text, var(--sn-cosmic-text-hex));
  
  // Optional Catppuccin compatibility layer
  // These are only used if user has Catppuccin as their base Spicetify theme
  --catppuccin-base: #1e1e2e;
  --catppuccin-mantle: #181825;  
  --catppuccin-crust: #11111b;
  --catppuccin-surface0: #313244;
  --catppuccin-surface1: #45475a;
  --catppuccin-surface2: #585b70;
  --catppuccin-text: #cdd6f4;
}

// =============================================================================
// BRIGHTNESS MODE SELECTORS
// =============================================================================

// Bright mode (lighter base colors with vibrant effects)
:root[data-sn-brightness="bright"],
html[style*="--sn-brightness-mode: \"bright\""] {
  // Use ColorStateManager-provided base colors (will be lighter variants)
  // These are set by ColorStateManager.applyColorStateToCSSVariables()
  
  // Gradient effect modifiers (vibrant)
  --sn-bg-gradient-saturation: var(--sn-brightness-bright-saturation);
  --sn-bg-gradient-brightness: var(--sn-brightness-bright-brightness);
  --sn-bg-gradient-contrast: var(--sn-brightness-bright-contrast);
  --sn-bg-gradient-opacity: var(--sn-brightness-bright-opacity);
}

// Balanced mode (standard base colors with moderate effects)
:root[data-sn-brightness="balanced"],
html[style*="--sn-brightness-mode: \"balanced\""] {
  // Use ColorStateManager-provided base colors (standard variants)
  
  // Gradient effect modifiers (moderate)
  --sn-bg-gradient-saturation: var(--sn-brightness-balanced-saturation);
  --sn-bg-gradient-brightness: var(--sn-brightness-balanced-brightness);
  --sn-bg-gradient-contrast: var(--sn-brightness-balanced-contrast);
  --sn-bg-gradient-opacity: var(--sn-brightness-balanced-opacity);
}

// Dark mode (darker base colors with subtle effects)
:root[data-sn-brightness="dark"],
html[style*="--sn-brightness-mode: \"dark\""] {
  // Use ColorStateManager-provided base colors (darker variants)
  
  // Gradient effect modifiers (subtle)
  --sn-bg-gradient-saturation: var(--sn-brightness-dark-saturation);
  --sn-bg-gradient-brightness: var(--sn-brightness-dark-brightness);
  --sn-bg-gradient-contrast: var(--sn-brightness-dark-contrast);
  --sn-bg-gradient-opacity: var(--sn-brightness-dark-opacity);
}

// =============================================================================
// RESPONSIVE DESIGN OVERRIDES
// =============================================================================

@media (max-width: 768px) {
  :root {
    // Mobile visual effects field optimization
    --sn-visual-effects-depth-field: 600px;
    --sn-visual-effects-magnetic-hover-pull: calc(12px * var(--sn-visual-effects-mobile-reduction));
    --sn-visual-effects-magnetic-focus-pull: calc(18px * var(--sn-visual-effects-mobile-reduction));
    --sn-visual-effects-field-intensity: calc(0.4 * var(--sn-visual-effects-mobile-reduction));
  }
}

@media (prefers-contrast: high) {
  :root {
    // Enhanced visual effects field contrast
    --sn-visual-effects-contrast-boost: 1.15;
    --sn-visual-effects-field-intensity: 0.6;
  }
}

// =============================================================================
// MOTION ACCESSIBILITY & STABILITY CONTROLS
// =============================================================================

/* Comprehensive reduced motion support - disables all problematic animations */
@media (prefers-reduced-motion: reduce) {
  :root {
    // Disable all rotations for stable UI
    --sn-rotation-disable: 1 !important;
    --sn-rotation-multiplier: 0 !important;

    // Reduce animation intensity
    --sn-animation-intensity: 0.3 !important;
    --sn-animation-reduce: 1 !important;

    // Disable complex visual effects
    --sn-visual-effects-field-intensity: 0.1 !important;
  }

  // Disable problematic animations entirely
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Utility classes for manual motion control */
.sn-no-rotation,
.sn-stable-ui {
  --sn-rotation-disable: 1 !important;
  --sn-rotation-multiplier: 0 !important;
}

.sn-minimal-animation {
  --sn-animation-intensity: 0.2 !important;
  --sn-animation-reduce: 1 !important;
}

.sn-full-effects {
  --sn-rotation-disable: 0 !important;
  --sn-rotation-multiplier: 1 !important;
  --sn-animation-intensity: 1 !important;
  --sn-animation-reduce: 0 !important;
}