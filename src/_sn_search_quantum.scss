// =============================================================================
// YEAR 3000: QUANTUM SEARCH INTERFACE MODULE - HARMONY INTEGRATED
// =============================================================================
// Transforms search results into a holographic, neural-connected interface
// UPDATED: Full harmony engine integration with contrast boosting

// === QUANTUM SEARCH CONTAINER WITH HARMONY BOOST ===
.main-searchPage-content {
  position: relative;
  perspective: 2000px;

  // REMOVED: Quantum particle field background - now handled by precision module
  // This eliminates conflict with unified gradient system

  // Harmony-boosted quantum field resonance effect
  &::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 0;
    background: conic-gradient(
      from 0deg at 50% 50%,
      transparent 0deg,
      rgba(
          var(--sn-search-gradient-primary-rgb),
          calc(0.015 * var(--sn-search-contrast-boost, 1))
        )
        90deg,
      transparent 180deg,
      rgba(
          var(--sn-search-gradient-secondary-rgb),
          calc(0.01 * var(--sn-search-contrast-boost, 1))
        )
        270deg,
      transparent 360deg
    );
    animation: quantum-field-rotation 30s linear infinite;
    border-radius: 24px;
    pointer-events: none;
  }
}

// === HOLOGRAPHIC RESULT SECTIONS WITH HARMONY ===
.main-shelf-shelf {
  position: relative;
  transform-style: preserve-3d;
  margin: 32px 0;

  // Neural network connection lines (harmony-boosted)
  &:not(:last-child)::after {
    content: "";
    position: absolute;
    bottom: -16px;
    left: 50%;
    width: 200px;
    height: 2px;
    transform: translateX(-50%);
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(
          var(--sn-search-gradient-primary-rgb),
          calc(0.3 * var(--sn-search-contrast-boost, 1))
        )
        20%,
      rgba(
          var(--sn-search-gradient-accent-rgb),
          calc(0.5 * var(--sn-search-contrast-boost, 1))
        )
        50%,
      rgba(
          var(--sn-search-gradient-primary-rgb),
          calc(0.3 * var(--sn-search-contrast-boost, 1))
        )
        80%,
      transparent 100%
    );
    animation: neural-pulse 3s ease-in-out infinite;
  }

  // Section headers with harmony integration
  .main-shelf-header {
    position: relative;

    h2 {
      // Enhanced quantum shimmer with harmony boost
      &::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent 0%,
          rgba(
              var(--sn-oklab-processed-bright-highlight-rgb),
              calc(0.2 * var(--sn-search-contrast-boost, 1))
            )
            50%,
          transparent 100%
        );
        animation: quantum-shimmer 4s ease-in-out infinite;
      }
    }
  }
}

// === HOLOGRAPHIC GRID CONTAINERS ===
.main-gridContainer-gridContainer {
  position: relative;
  transform-style: preserve-3d;

  // REMOVED: Energy field base - now handled by precision module for consistency
}

// === QUANTUM-ENHANCED CARDS WITH HARMONY BOOST ===
.main-card-card {
  position: relative;
  transform-style: preserve-3d;
  transform-origin: center center;

  // Holographic depth enhancement (compatible with unified gradient backgrounds)
  &:hover {
    transform: perspective(1000px) rotateX(calc(var(--mouse-y, 0) * 5deg))
      rotateY(calc(var(--mouse-x, 0) * 5deg)) translateZ(20px) scale(1.05);
  }

  // Harmony-boosted temporal relevance indicator
  &::before {
    content: "";
    position: absolute;
    top: 8px;
    right: 8px;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: conic-gradient(
      from 0deg,
      rgba(
          var(--sn-search-gradient-primary-rgb),
          calc(0.8 * var(--sn-search-contrast-boost, 1))
        )
        0deg,
      rgba(
          var(--sn-search-gradient-accent-rgb),
          calc(0.6 * var(--sn-search-contrast-boost, 1))
        )
        120deg,
      rgba(
          var(--sn-search-gradient-secondary-rgb),
          calc(0.8 * var(--sn-search-contrast-boost, 1))
        )
        240deg,
      rgba(
          var(--sn-search-gradient-primary-rgb),
          calc(0.8 * var(--sn-search-contrast-boost, 1))
        )
        360deg
    );
    animation: temporal-indicator 2s linear infinite;
    z-index: 2;
  }

  // Enhanced neural connection points with harmony boost
  &::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 4px;
    height: 4px;
    transform: translate(-50%, -50%);
    background: rgba(
      var(--sn-search-gradient-primary-rgb),
      calc(0.6 * var(--sn-search-contrast-boost, 1))
    );
    border-radius: 50%;
    opacity: 0;
    transition: all 400ms ease;
    box-shadow: 0 0 8px
        rgba(
          var(--sn-search-gradient-primary-rgb),
          calc(0.4 * var(--sn-search-contrast-boost, 1))
        ),
      0 0 16px
        rgba(
          var(--sn-search-gradient-primary-rgb),
          calc(0.2 * var(--sn-search-contrast-boost, 1))
        );
    z-index: 1; // Ensure it appears above precision module overlays
  }

  &:hover::after {
    opacity: 1;
    animation: neural-connection-pulse 1.5s ease-in-out infinite;
  }
}

// === ENHANCED TOP RESULT WITH HARMONY BOOST ===
[data-testid="top-result-card"] {
  .main-card-card {
    position: relative;

    // Quantum signature border animation (works with precision module gradient border)
    animation: quantum-border-flow 8s linear infinite;

    // Enhanced holographic effects with harmony boost
    &:hover {
      transform: perspective(1200px) rotateX(calc(var(--mouse-y, 0) * 8deg))
        rotateY(calc(var(--mouse-x, 0) * 8deg)) translateZ(40px) scale(1.08);

      box-shadow: 0 25px 50px
          rgba(
            var(--sn-search-gradient-primary-rgb),
            calc(0.2 * var(--sn-search-contrast-boost, 1))
          ),
        0 15px 30px rgba(var(--sn-oklab-processed-dynamic-shadow-rgb), 0.3),
        0 0 50px
          rgba(
            var(--sn-search-gradient-primary-rgb),
            calc(0.15 * var(--sn-search-contrast-boost, 1))
          );
    }
  }
}

// === TRACK LIST QUANTUM ENHANCEMENTS WITH HARMONY ===
.main-trackList-trackListRow {
  position: relative;

  // Harmony-boosted quantum track energy indicator
  &::before {
    content: "";
    position: absolute;
    left: -8px;
    top: 50%;
    width: 3px;
    height: 0%;
    transform: translateY(-50%);
    background: linear-gradient(
      180deg,
      rgba(
          var(--sn-search-gradient-primary-rgb),
          calc(0.8 * var(--sn-search-contrast-boost, 1))
        )
        0%,
      rgba(
          var(--sn-search-gradient-accent-rgb),
          calc(0.6 * var(--sn-search-contrast-boost, 1))
        )
        50%,
      rgba(
          var(--sn-search-gradient-primary-rgb),
          calc(0.8 * var(--sn-search-contrast-boost, 1))
        )
        100%
    );
    border-radius: 2px;
    transition: all 400ms cubic-bezier(0.23, 1, 0.32, 1);
  }

  &:hover::before {
    height: 80%;
    animation: quantum-energy-flow 2s ease-in-out infinite;
  }

  // Enhanced neural network connections between tracks
  &:not(:last-child)::after {
    content: "";
    position: absolute;
    bottom: -1px;
    left: 20%;
    right: 20%;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(
          var(--sn-search-gradient-primary-rgb),
          calc(0.1 * var(--sn-search-contrast-boost, 1))
        )
        25%,
      rgba(
          var(--sn-search-gradient-accent-rgb),
          calc(0.2 * var(--sn-search-contrast-boost, 1))
        )
        50%,
      rgba(
          var(--sn-search-gradient-primary-rgb),
          calc(0.1 * var(--sn-search-contrast-boost, 1))
        )
        75%,
      transparent 100%
    );
    opacity: 0;
    transition: all 600ms ease;
  }

  &:hover::after {
    opacity: 1;
    animation: neural-track-connection 1.5s ease-in-out infinite;
  }
}

// === QUANTUM ANIMATIONS ===
@keyframes quantum-particle-drift {
  0%,
  100% {
    transform: translate(0, 0) rotate(0deg);
  }
  25% {
    transform: translate(10px, -15px) rotate(90deg);
  }
  50% {
    transform: translate(-5px, 10px) rotate(180deg);
  }
  75% {
    transform: translate(-10px, -5px) rotate(270deg);
  }
}

@keyframes quantum-field-rotation {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes neural-pulse {
  0%,
  100% {
    opacity: 0.3;
    transform: scaleX(1);
  }
  50% {
    opacity: 0.8;
    transform: scaleX(1.5);
  }
}

@keyframes quantum-shimmer {
  0% {
    left: -100%;
  }
  50% {
    left: 100%;
  }
  100% {
    left: 100%;
  }
}

@keyframes temporal-indicator {
  0% {
    transform: rotate(0deg);
    filter: hue-rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
    filter: hue-rotate(360deg);
  }
}

@keyframes neural-connection-pulse {
  0%,
  100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0.6;
  }
  50% {
    transform: translate(-50%, -50%) scale(2);
    opacity: 1;
  }
}

@keyframes quantum-border-flow {
  0% {
    filter: hue-rotate(0deg);
  }
  100% {
    filter: hue-rotate(360deg);
  }
}

@keyframes quantum-energy-flow {
  0%,
  100% {
    filter: brightness(1) saturate(1);
  }
  50% {
    filter: brightness(1.3) saturate(1.4);
  }
}

@keyframes neural-track-connection {
  0%,
  100% {
    transform: scaleX(1);
    opacity: 0.2;
  }
  50% {
    transform: scaleX(1.2);
    opacity: 0.6;
  }
}

// === ACCESSIBILITY & PERFORMANCE ===
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

// Performance optimization for lower-end devices
@media (max-width: 768px) {
  .main-card-card {
    &:hover {
      transform: translateZ(10px) scale(1.02); // Simplified 3D for mobile
    }
  }

  .main-searchPage-content::after {
    display: none; // Disable quantum field rotation on mobile
  }
}
