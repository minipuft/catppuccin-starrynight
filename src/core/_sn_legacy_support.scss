// ████████████████████████████████████████████████████████████████████████████████
// YEAR 3000 LEGACY SUPPORT - Backward Compatibility & Migration Support
// ████████████████████████████████████████████████████████████████████████████████

@use "./_design_tokens" as *;

:root .Root__main-view {
  // Duration in album view
  .UyzJidwrGk3awngSGIwv {
    color: var(--spice-subtext);
  }

  // For that small dot on podcasts that notify us of new episodes
  .main-home-content
    > section:first-child
    > .main-gridContainer-gridContainer
    > div
    span[aria-label],
  span[aria-label="New episode"],
  span[aria-label="New Podcast Episode"] {
    background: var(--spice-text);
  }

  // Enhanced button
  .Button-sm-buttonSecondary-useBrowserDefaultFocusStyle {
    background-color: var(--spice-base);
    color: var(--spice-text);
    border: 1px solid var(--spice-overlay1);

    &:hover {
      border-color: oklab-color('highlight', 0.7);
    }
  }
}

// ████████████████████████████████████████████████████████████████████████████████
// STARRYNIGHT LEGACY SUPPORT - Backward Compatibility Support
// ████████████████████████████████████████████████████████████████████████████████
// TODO: Extract backward compatibility styles and settings UI from main file
// TODO: Ensure compatibility with existing Spicetify themes
// TODO: Include StarryNight settings component styling
// TODO: Target file: src/core/_sn_legacy_support.scss

// StarryNight settings component styling
.starrynight-settings {
  .setting-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 0;
    border-bottom: 1px solid var(--spice-border);

    &:last-child {
      border-bottom: none;
    }

    .setting-label {
      color: var(--spice-text);
      font-size: 14px;
      font-weight: 500;
      min-width: 120px;
    }

    select.main-dropDown-dropDown {
      min-width: 150px;
      background: var(--spice-button);
      color: var(--spice-text);
      border: 1px solid var(--spice-border);
      border-radius: 4px;
      padding: 8px 12px;

      &:hover {
        background: var(--spice-button-active);
      }

      &:focus {
        outline: 2px solid var(--spice-accent);
        outline-offset: 2px;
      }
    }
  }
}

// Integration with main settings page
.main-settingsPage-section {
  .starrynight-settings {
    margin-top: 16px;
  }
}

// Legacy Spicetify variable fallbacks
:root {
  // Ensure compatibility with older Spicetify themes
  --spice-rgb-base: var(--spice-base, "30,30,46");
  --spice-rgb-accent: var(--spice-accent, "140,170,238");

  // Fallback border radius if not defined
  --border-radius: var(--spice-border-radius, 6px);
}

// Enhanced Button System - Year 3000 Integration
:root {
  // Override core Spicetify button colors with Year 3000 accent system
  --spice-button: #{oklab-color('accent', 0.15)};
  --spice-button-active: #{oklab-color('accent', 0.25)};
  --spice-button-disabled: #{oklab-color('accent', 0.05)};
  --spice-rgb-button: var(--sn-accent-rgb);

  // Button shadow and highlight system
  --sn-button-shadow: 0 1px 3px #{oklab-color('accent', 0.2)};
  --sn-button-highlight: inset 0 1px 0 #{oklab-color('accent', 0.1)};
  --sn-button-hover-shadow: 0 2px 6px #{oklab-color('accent', 0.3)};
  --sn-button-hover-highlight: inset 0 1px 0 #{oklab-color('accent', 0.2)};
}

// Apply shadow and highlight system to all buttons
button,
.Button,
.main-playButton-PlayButton,
select.main-dropDown-dropDown,
.main-button-secondary,
.main-button-primary {
  // Base shadows and highlights for consciousness depth
  box-shadow: var(--sn-button-shadow), var(--sn-button-highlight);
  transition: box-shadow 0.2s ease, transform 0.1s ease;
  
  // Enhanced hover state with deeper shadows
  &:hover:not(:disabled) {
    box-shadow: var(--sn-button-hover-shadow), var(--sn-button-hover-highlight);
    transform: translateY(-1px);
  }
  
  // Active state with pressed effect
  &:active:not(:disabled) {
    transform: translateY(0);
    box-shadow: var(--sn-button-shadow), var(--sn-button-highlight);
  }
  
  // Disabled state with reduced shadows
  &:disabled {
    box-shadow: 0 1px 2px oklab-color('accent', 0.1),
                inset 0 1px 0 oklab-color('accent', 0.05);
    opacity: 0.6;
  }
}