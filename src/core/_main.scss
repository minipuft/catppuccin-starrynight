// ████████████████████████████████████████████████████████████████████████████████
// CATPPUCCIN STARRYNIGHT - Optimized Architecture (Phase Card)
// Consolidated SCSS module system with strategic consolidation complete
// Phase 1-3: 587 lines eliminated, 875KB optimized CSS
// Phase 4: 273KB source cleanup (legacy files + archived code removed)
// Phase 4.5: 153KB cleanup + focused integration (880KB final CSS, beat-responsive + white layer fixes)
// Phase 5: Removed non-functional typography (36KB/740 lines, broken music sync + unstable selectors)
// Phase 6+: Design token consolidation (858 lines eliminated, single authoritative token source)
// Phase 7.5-7.6: Compatibility cleanup (44 usages migrated, 164 lines eliminated)
// Phase 7.7: Orphaned effect files + token shims removed (1,369 lines, 50KB eliminated)
// Phase 7.8: Sidebar navigation consolidation (264 lines eliminated, single source of truth)
// Phase 8.1: Depth system consolidation (3 files → 1 unified cosmic depth system, zero breaking changes)
// Phase 8.2: Visual effects unification (2 files → 1, 1405→1050 lines, TypeScript-aligned CSS variables)
// Phase 8.3: Atmospheric depth effects (activated crystals, archived glyphs + glyph variables, 227 lines eliminated)
// Phase 8.4: Card visual accents consolidation (_sn_visual_accents → _sn_enhanced_cards, single source of truth)
// Phase Card: Card system consolidation (_sn_card_non_search → _sn_enhanced_cards, 431 lines eliminated, technical naming)
// ████████████████████████████████████████████████████████████████████████████████

// === LAYER 1: FOUNDATION (Load Order Critical) ===
// Single authoritative design token source - all modules depend on these
@use "../design-tokens/tokens" as *; // Unified design token system (932 lines, all tokens)

// === LAYER 2: UTILITIES (Mixin Dependencies) ===
// Utility mixins and functions - loaded after tokens, before implementations
@use "_mixins" as *;
@use "_design_tokens" as *; // OKLAB color abstraction and shadow stack presets (Phase: Design Token Mixin System)
@use "_performance_mixins" as *; // Performance optimization mixins (includes GPU acceleration)
@use "_accessibility" as *; // Unified accessibility system (reduced motion, contrast support)
@use "_interaction_mixins" as *; // Shared interaction patterns (ripple, focus, hover, beat-responsive)
@use "_unified-effects-engine" as *; // Phase 1: Unified formula-based effects system
// REMOVED: _sn_typography (broken music sync, unstable selectors, self-contained mixins)
@use "_dom_selectors" as *; // Centralized DOM selector mixins

// === LAYER 3: COMPATIBILITY (Backward Compatibility) ===
// Compatibility layers for renamed variables and mixins
// REMOVED: _variable-compatibility (Phase 7.6 - all 6 variables unused, 59 lines eliminated)
// REMOVED: _mixin-compatibility (metaphorical mixin aliases migrated to technical names)
// REMOVED: _variables (Phase 6.1 - dead code, 16 lines, no functionality)
@use "_sn_legacy_support" as *;

// === LAYER 4: STRUCTURAL (Layout & Components) ===
// Layout modules - structural positioning and containers
// Note: Sidebar files in ../sidebar/ for domain cohesion, imported here for layer ordering
@use "../layout/_main_view_container" as *;
@use "../sidebar/_navbar" as *; // MOVED: Domain-based organization (Phase 7.8)
@use "../layout/_top_bar" as *;
@use "../layout/_top_bar_enhanced" as *;
@use "../layout/_action_bar_unified" as *; // CONSOLIDATED: Was _action_bar_enhanced + _sn_header_actionBar
// @use "../layout/_sn_sidebar_navigation" as *; // ✅ CONSOLIDATED into ../sidebar/_sidebar_interactive.scss (Phase 7.8)
@use "../sidebar/_right_sidebar" as *; // MOVED: Domain-based organization (Phase 7.8)
@use "../layout/_entity_header_enhanced" as *; // REFACTORED: Now uses mixins
@use "../layout/_artist_header_effects" as *; // REFACTORED: Now uses mixins (kept separate for Year 3000 philosophy)
@use "../layout/_nebula_gradient_system" as *; // Music-reactive 4-layer nebula gradient backgrounds

// Component modules - reusable UI components
@use "../components/_sn_card_base" as *; // Base card styles first
@use "../components/_sn_enhanced_cards" as *; // All card enhancements (Phase Card: consolidated advanced non-search system with technical naming)
// CONSOLIDATED (Phase Card): _sn_card_non_search → _sn_enhanced_cards.scss (16 variables + 4 keyframes renamed to technical standards)
// ARCHIVED (Phase 8.3): _sn_glyph_variables → plans/archive/phase-5-incomplete/ (unused mixin, dead code)
// CONSOLIDATED (Phase 8.4): _sn_visual_accents → _sn_enhanced_cards.scss (single source of truth)
@use "../components/_track_list_enhanced" as *;
@use "../components/_now_playing" as *;
// ARCHIVED (Phase 8.5): _sn_loading → plans/archive/phase-4-incomplete/ (passive 580-line module, no TypeScript integration)
@use "../components/_sn_active_loading_states" as *; // Phase 8.5: Active loading states with LoadingStateService

// === LAYER 5: FEATURES (Advanced Functionality) ===
// Load features in dependency order for optimal performance

// Core system features first - other features depend on these
@use "../features/backgrounds/_cosmic_depth_system" as cosmic-depth; // Unified depth system (Phase 8.1 consolidation)

// Background layers - provide foundation for visual effects
@use "../features/backgrounds/_content_protection_system" as depth-layers; // Content-aware protection architecture
// @use "../features/backgrounds/_ambient_effects" as *; // ✅ ARCHIVED - consolidated into unified-visual-effects (Phase 8.2, 2025-09-30)
// @use "../features/backgrounds/_cosmic_effects" as *; // ✅ ARCHIVED - consolidated into _particle_animation_system.scss (2025-09-30)
@use "../features/backgrounds/_particle_animation_system" as particles; // ✅ ENHANCED - now includes aurora + nebula particles from cosmic_effects
// @use "../features/backgrounds/_particle_field" as *; // ✅ ARCHIVED - consolidated into _particle_animation_system.scss (2025-09-30)
// @use "../features/backgrounds/_connected_dots" as *; // ✅ Removed - file deleted
@use "../features/backgrounds/_grid_navigation_mode" as grid-nav;

// Music synchronization - core functionality for visual effects
@use "../features/music-sync/_beat_synchronization" as *;
@use "../features/music-sync/_music_visualization" as *;
@use "../features/music-sync/_genre_aware_ui" as genre-ui;
// @use "../features/music-sync/ui/visual-effects-main" as *; // ✅ ARCHIVED - consolidated into audio-reactive-atmospherics (Phase 8.2, 2025-09-30)
@use "../features/music-sync/ui/audio-reactive-atmospherics" as *; // Phase 8.2: Audio-reactive atmospherics (filter + animation, TypeScript-aligned)

// Visual effects - depend on backgrounds and music sync
@use "../features/visual-effects/_fluid-gradient-base" as *; // Base gradients first
@use "../features/visual-effects/_living_gradients" as *; // Dynamic gradient effects
@use "../features/visual-effects/_crystalline_glassmorphism" as *;
@use "../features/visual-effects/_beat_sync_glassmorphism" as *;
@use "../features/visual-effects/_translucent_overlays" as *;
// REMOVED: _advanced_layer (Phase 7.3 - experimental effects, 26KB, moved to plans/archive/experimental/)

// Visual effect fixes - critical z-index and blend mode corrections
@use "../fixes/_white_layer_fixes" as *; // White layer diagnostic system (scoped to avoid hover conflicts)

// Animations - enhance visual effects
// 3D transforms removed - simple hover effects integrated into _sn_enhanced_cards.scss
@use "../features/animations/_fluid_morphing" as *; // Phase 7.4: Extracted from _shape_transitions (200 lines vs 1007)
@use "../features/animations/_shelf_breathing_animation" as *; // Subtle 3D breathing motion on shelves
// @use "../features/animations/_field_matrix" as *; // ✅ Commented out - file missing (pre-existing issue)

// Interactions - topmost layer
@use "../features/interactions/_dynamic_interface" as *;
@use "../features/interactions/_text_visual_effects" as *;
@use "../features/interactions/_css_interactions" as *;
@use "../features/interactions/_microinteractions" as *;

// Atmospheric effects - Year 3000 depth
@use "../features/backgrounds/_atmospheric_crystals" as *;

// === LAYER 6: SPECIALIZED SYSTEMS ===
// High-level behavioral and optimization systems
// ARCHIVED: _sn_data_glyphs → plans/archive/phase-5-incomplete/ (Phase 8.3 - no TS implementation, duplicate meditation code)
// CONSOLIDATED: _sn_advanced_visual_effects merged into ../sidebar/_sidebar_interactive
// CONSOLIDATED: _sn_performance_optimization → design tokens + _performance_mixins + _accessibility

// === LAYER 7: INTERFACE SPECIFIC ===
// Sidebar-specific functionality
@use "../sidebar/_sidebar_interactive" as *; // Sidebar-specific interactions

// === APPLY BACKGROUND EFFECTS ===
// Include mixins after all @use statements
@include depth-layers.apply-depth-layers;
@include cosmic-depth.apply-cosmic-depth-system;
@include particles.apply-particle-network;
@include grid-nav.apply-dot-matrix-navigation-mode;
@include genre-ui.apply-genre-aware-ui;

// ████████████████████████████████████████████████████████████████████████████████
// OPTIMIZED ARCHITECTURAL LAYERS (Load Order):
// 1. FOUNDATION    - Single authoritative design token source (tokens.scss)
//                    Motion/visual tokens now forward to unified source
// 2. UTILITIES     - Mixins, functions, DOM selectors (tool dependencies)
// 3. COMPATIBILITY - Backward compatibility layers (legacy support only)
// 4. STRUCTURAL    - Layout and component architecture (UI foundation)
// 5. FEATURES      - Advanced functionality (visual effects, interactions)
// 6. SYSTEMS       - High-level behavioral systems (performance, analytics)
// 7. INTERFACE     - Specialized interface modules (search, sidebar)
//
// Performance Targets: <1MB bundle, <30ms compilation, 60fps runtime
// Phase 6+ Consolidation: 858 lines eliminated, single token source
// Phase 7.5-7.6: 164 lines compatibility cleanup, zero unused variables
// ████████████████████████████████████████████████████████████████████████████████
