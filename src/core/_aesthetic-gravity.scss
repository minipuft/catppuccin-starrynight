// ===================================================================
// üåå YEAR 3000 AESTHETIC GRAVITY SYSTEM - Phase 4
// ===================================================================
// Visual gravitational physics for UI elements
// Part of the Year 3000 Color Harmony Foundation System
// Kinetic Verbs ‚Üí Quantum Empathy ‚Üí Aesthetic Gravity ‚Üí Complete Harmony

// ===========================================
// üéØ GRAVITY WELL FOUNDATIONS
// ===========================================

// Base gravity field that can be applied to any element
@mixin gravity-well($mass: 1.0, $radius: 100px) {
  position: relative;

  &::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: calc(#{$radius} * var(--sn-gravity-field-scale, 1));
    height: calc(#{$radius} * var(--sn-gravity-field-scale, 1));
    transform: translate(-50%, -50%);
    border-radius: 50%;
    background: radial-gradient(
      circle,
      rgba(var(--sn-gradient-primary-rgb, var(--spice-rgb-accent)), calc(0.02 * #{$mass})) 0%,
      rgba(var(--sn-gradient-primary-rgb, var(--spice-rgb-accent)), calc(0.01 * #{$mass})) 30%,
      transparent 70%
    );
    pointer-events: none;
    z-index: -1;
    opacity: var(--sn-gravity-well-opacity, 0.3);
    transition: all var(--sn-gravity-transition, 800ms) ease-out;
  }
}

// Primary gravity wells for major UI components
.sn-gravity-well-primary {
  @include gravity-well(2.0, 150px);

  &::before {
    animation: gravity-well-pulse
               calc(var(--sn-kinetic-tempo-multiplier, 1) * 4s)
               ease-in-out infinite;
  }
}

.sn-gravity-well-secondary {
  @include gravity-well(1.5, 120px);
}

.sn-gravity-well-tertiary {
  @include gravity-well(1.0, 80px);
}

// ===========================================
// üå™Ô∏è ORBITAL MECHANICS
// ===========================================

// Orbital container for elements that can orbit gravity wells
.sn-orbital-container {
  position: relative;
  transform-style: preserve-3d;
}

// Orbital elements with different orbit speeds and radii
.sn-orbital-element {
  position: absolute;
  transform-origin: var(--sn-orbit-center-x, 50%) var(--sn-orbit-center-y, 50%);

  &.orbit-close {
    animation: orbital-motion-close
               calc(var(--sn-kinetic-tempo-multiplier, 1) * 8s)
               linear infinite;
  }

  &.orbit-medium {
    animation: orbital-motion-medium
               calc(var(--sn-kinetic-tempo-multiplier, 1) * 12s)
               linear infinite;
  }

  &.orbit-far {
    animation: orbital-motion-far
               calc(var(--sn-kinetic-tempo-multiplier, 1) * 20s)
               linear infinite;
  }

  // Reverse orbit for visual variety
  &.orbit-reverse {
    animation-direction: reverse;
  }
}

// ===========================================
// üèîÔ∏è VISUAL WEIGHT CLASSES
// ===========================================

// Elements with different visual masses
.sn-visual-weight-massive {
  --sn-visual-mass: 3.0;
  transform: scale(var(--sn-gravity-scale-massive, 1.02));
  filter: brightness(var(--sn-gravity-brightness-massive, 1.1));
}

.sn-visual-weight-heavy {
  --sn-visual-mass: 2.0;
  transform: scale(var(--sn-gravity-scale-heavy, 1.01));
}

.sn-visual-weight-normal {
  --sn-visual-mass: 1.0;
}

.sn-visual-weight-light {
  --sn-visual-mass: 0.5;
  transform: scale(var(--sn-gravity-scale-light, 0.99));
  opacity: var(--sn-gravity-opacity-light, 0.95);
}

.sn-visual-weight-floating {
  --sn-visual-mass: 0.1;
  transform: translateY(var(--sn-gravity-float-offset, -2px));
  animation: gravity-float
             calc(var(--sn-kinetic-tempo-multiplier, 1) * 6s)
             ease-in-out infinite;
}

// ===========================================
// üåä TIDAL EFFECTS
// ===========================================

// Elements affected by gravitational tidal forces
.sn-tidal-stretch {
  transition: transform var(--sn-gravity-transition, 800ms) cubic-bezier(0.25, 0.46, 0.45, 0.94);

  &.tidal-horizontal {
    transform: scaleX(var(--sn-tidal-stretch-x, 1)) scaleY(var(--sn-tidal-stretch-y, 1));
  }

  &.tidal-vertical {
    transform: scaleX(var(--sn-tidal-stretch-x, 1)) scaleY(var(--sn-tidal-stretch-y, 1));
  }
}

// ===========================================
// üöÄ ANTI-GRAVITY ZONES
// ===========================================

.sn-anti-gravity-zone {
  position: relative;

  .sn-floating-element {
    transform: translateY(var(--sn-anti-gravity-lift, -5px));
    transition: transform var(--sn-gravity-transition, 800ms) ease-out;
    animation: anti-gravity-float
               calc(var(--sn-kinetic-tempo-multiplier, 1) * 8s)
               ease-in-out infinite;
  }

  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(
      ellipse at center,
      rgba(var(--sn-gradient-accent-rgb, var(--spice-rgb-surface1)), 0.03) 0%,
      transparent 60%
    );
    pointer-events: none;
    z-index: -1;
  }
}

// ===========================================
// üéµ MUSICAL RESONANCE GRAVITY
// ===========================================

// Gravity wells that respond to music analysis
.sn-musical-gravity-well {
  @include gravity-well(1.0, 100px);

  // Bass response - deeper gravity wells
  &.bass-responsive::before {
    transform: translate(-50%, -50%)
               scale(calc(1 + var(--sn-kinetic-energy, 0.5) * 0.3));
  }

  // Beat sync - pulsing gravity
  &.beat-sync::before {
    animation: musical-gravity-pulse
               calc(60s / var(--sn-kinetic-bpm, 120))
               ease-in-out infinite;
  }

  // Energy responsive - stronger fields with high energy
  &.energy-responsive {
    --sn-gravity-well-opacity: calc(0.3 + var(--sn-kinetic-energy, 0.5) * 0.4);
  }
}

// ===========================================
// üß† EMPATHY-INTEGRATED GRAVITY
// ===========================================

// Gravity wells that respond to quantum empathy predictions
.sn-empathy-gravity-well {
  @include gravity-well(1.0, 80px);
  opacity: 0;
  transition: opacity var(--sn-empathy-transition, 1200ms) ease-out;

  &.empathy-active {
    opacity: 1;

    &::before {
      background: radial-gradient(
        circle,
        rgba(var(--sn-empathy-prediction-rgb, var(--sn-gradient-primary-rgb)), 0.05) 0%,
        rgba(var(--sn-empathy-prediction-rgb, var(--sn-gradient-primary-rgb)), 0.02) 40%,
        transparent 80%
      );
    }
  }

  // Different intensities based on empathy confidence
  &.empathy-confidence-high::before {
    transform: translate(-50%, -50%) scale(1.3);
  }

  &.empathy-confidence-medium::before {
    transform: translate(-50%, -50%) scale(1.1);
  }

  &.empathy-confidence-low::before {
    transform: translate(-50%, -50%) scale(0.9);
  }
}

// ===========================================
// üéØ SPOTIFY UI SPECIFIC GRAVITY EFFECTS
// ===========================================

// Main player gravity well
.main-nowPlayingWidget-nowPlaying {
  @extend .sn-gravity-well-primary;
  @extend .sn-musical-gravity-well;
  @extend .bass-responsive;
  @extend .beat-sync;
}

// Sidebar navigation gravity
.main-navBar-navBar {
  @extend .sn-gravity-well-secondary;

  .main-navBar-navBarItem {
    @extend .sn-visual-weight-normal;
    transition: all var(--sn-gravity-transition, 400ms) ease-out;

    &:hover {
      @extend .sn-visual-weight-heavy;
    }

    &.active {
      @extend .sn-visual-weight-massive;
    }
  }
}

// Track list orbital elements
.main-trackList-trackListRow {
  @extend .sn-orbital-element;
  @extend .orbit-medium;

  &:nth-child(odd) {
    @extend .orbit-reverse;
  }

  &:hover {
    animation-play-state: paused;
    @extend .sn-visual-weight-heavy;
  }
}

// Search bar anti-gravity
.main-search-searchBar {
  @extend .sn-anti-gravity-zone;

  input {
    @extend .sn-floating-element;
  }
}

// Queue items with tidal effects
.main-queue-queueItem {
  @extend .sn-tidal-stretch;
  @extend .tidal-horizontal;
}

// ===========================================
// üåü KEYFRAME ANIMATIONS
// ===========================================

// Gravity well pulsing animation
@keyframes gravity-well-pulse {
  0%, 100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: var(--sn-gravity-well-opacity, 0.3);
  }
  50% {
    transform: translate(-50%, -50%) scale(1.1);
    opacity: calc(var(--sn-gravity-well-opacity, 0.3) * 1.5);
  }
}

// Musical gravity pulse synced to beat
@keyframes musical-gravity-pulse {
  0%, 90% {
    transform: translate(-50%, -50%) scale(1);
  }
  5% {
    transform: translate(-50%, -50%) scale(1.2);
  }
  15% {
    transform: translate(-50%, -50%) scale(1.05);
  }
}

// Orbital motion animations
@keyframes orbital-motion-close {
  0% { transform: rotate(0deg) translateX(60px) rotate(0deg); }
  100% { transform: rotate(360deg) translateX(60px) rotate(-360deg); }
}

@keyframes orbital-motion-medium {
  0% { transform: rotate(0deg) translateX(100px) rotate(0deg); }
  100% { transform: rotate(360deg) translateX(100px) rotate(-360deg); }
}

@keyframes orbital-motion-far {
  0% { transform: rotate(0deg) translateX(150px) rotate(0deg); }
  100% { transform: rotate(360deg) translateX(150px) rotate(-360deg); }
}

// Floating animations
@keyframes gravity-float {
  0%, 100% {
    transform: translateY(var(--sn-gravity-float-offset, -2px));
  }
  50% {
    transform: translateY(calc(var(--sn-gravity-float-offset, -2px) * 2));
  }
}

@keyframes anti-gravity-float {
  0%, 100% {
    transform: translateY(var(--sn-anti-gravity-lift, -5px)) rotate(0deg);
  }
  33% {
    transform: translateY(calc(var(--sn-anti-gravity-lift, -5px) * 1.5)) rotate(1deg);
  }
  66% {
    transform: translateY(calc(var(--sn-anti-gravity-lift, -5px) * 0.7)) rotate(-1deg);
  }
}

// ===========================================
// üîß MODE-SPECIFIC OVERRIDES
// ===========================================

// Corporate-safe mode: Minimal gravity effects
.year3000-mode-corporate-safe {
  .sn-gravity-well-primary,
  .sn-gravity-well-secondary,
  .sn-gravity-well-tertiary {
    &::before {
      display: none;
    }
  }

  .sn-orbital-element {
    animation: none !important;
  }

  .sn-anti-gravity-zone .sn-floating-element {
    animation: none !important;
    transform: none !important;
  }
}

// Artist-vision mode: Balanced gravity effects
.year3000-mode-artist-vision {
  --sn-gravity-well-opacity: 0.2;
  --sn-gravity-transition: 600ms;
  --sn-gravity-field-scale: 0.8;
}

// Cosmic-maximum mode: Full gravity simulation
.year3000-mode-cosmic-maximum {
  --sn-gravity-well-opacity: 0.4;
  --sn-gravity-transition: 1200ms;
  --sn-gravity-field-scale: 1.2;
  --sn-anti-gravity-lift: -8px;
  --sn-gravity-float-offset: -4px;
}

// ===========================================
// üé® ACCESSIBILITY COMPLIANCE
// ===========================================

// Respect user motion preferences
@media (prefers-reduced-motion: reduce) {
  .sn-orbital-element,
  .sn-gravity-well-primary::before,
  .sn-gravity-well-secondary::before,
  .sn-gravity-well-tertiary::before,
  .sn-floating-element,
  .sn-musical-gravity-well::before {
    animation: none !important;
  }

  .sn-tidal-stretch,
  .sn-visual-weight-massive,
  .sn-visual-weight-heavy,
  .sn-visual-weight-light,
  .sn-visual-weight-floating {
    transition: none !important;
    transform: none !important;
  }
}

// High contrast mode adjustments
@media (prefers-contrast: high) {
  .sn-gravity-well-primary::before,
  .sn-gravity-well-secondary::before,
  .sn-gravity-well-tertiary::before {
    opacity: calc(var(--sn-gravity-well-opacity, 0.3) * 0.5);
  }
}

// ===========================================
// üåà CSS VARIABLE DEFAULTS
// ===========================================

:root {
  // Gravity field variables
  --sn-gravity-field-scale: 1;
  --sn-gravity-well-opacity: 0.3;
  --sn-gravity-transition: 800ms;

  // Visual weight variables
  --sn-gravity-scale-massive: 1.02;
  --sn-gravity-scale-heavy: 1.01;
  --sn-gravity-scale-light: 0.99;
  --sn-gravity-brightness-massive: 1.1;
  --sn-gravity-opacity-light: 0.95;

  // Float and lift variables
  --sn-gravity-float-offset: -2px;
  --sn-anti-gravity-lift: -5px;

  // Tidal effect variables
  --sn-tidal-stretch-x: 1;
  --sn-tidal-stretch-y: 1;

  // Orbital variables
  --sn-orbit-center-x: 50%;
  --sn-orbit-center-y: 50%;

  // Empathy integration variables
  --sn-empathy-prediction-rgb: var(--sn-gradient-primary-rgb, var(--spice-rgb-accent));
  --sn-empathy-transition: 1200ms;
}

// ===========================================
// üöÄ DEBUG UTILITIES
// ===========================================

.sn-gravity-debug {
  .sn-gravity-well-primary::before,
  .sn-gravity-well-secondary::before,
  .sn-gravity-well-tertiary::before,
  .sn-empathy-gravity-well::before {
    border: 1px dashed rgba(var(--spice-rgb-text), 0.3);
    opacity: 0.6 !important;
  }

  .sn-orbital-element {
    outline: 1px dotted rgba(var(--spice-rgb-accent), 0.5);
  }
}