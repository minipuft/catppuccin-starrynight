// ████████████████████████████████████████████████████████████████████████████████
// ORGANIC CINEMATIC CONSCIOUSNESS - Living Interface Foundation
// ████████████████████████████████████████████████████████████████████████████████
//
// This module provides the SCSS foundation for the organic consciousness system,
// creating a living interface that breathes, grows, and morphs with music.
//
// Core Philosophy: Move beyond quantum mechanics to biological cellular behavior
// Visual Language: Blade Runner neon-noir + Star Wars organic-tech fusion
// Color System: Dynamic emotional temperature mapping (1000K-20000K)
//
// ████████████████████████████████████████████████████████████████████████████████

// === CORE FOUNDATION ===
@import "core/organic-consciousness-variables";
@import "core/cellular-membrane-styles";
@import "core/breathing-animations";
@import "core/symbiotic-listening-effects";

// === COLOR SYSTEM ===
@import "color/emotional-temperature-colors";

// === CINEMATIC EFFECTS ===
@import "cinematic/blade-runner-aesthetics";
@import "cinematic/star-wars-organics";

// === ATMOSPHERIC SYSTEMS ===
@import "atmosphere/atmospheric-systems";

// === GLOBAL ORGANIC CONSCIOUSNESS STYLES ===

// Initialize organic consciousness on the root element
:root {
  // Enable organic consciousness system
  --organic-consciousness-enabled: 1;
  
  // Consciousness system initialization flag
  --organic-consciousness-system-loaded: 1;
  
  // Dynamic consciousness state (updated by BiologicalConsciousnessManager)
  --organic-consciousness-active: 1;
  --organic-consciousness-level: 0.7; // 0-1 consciousness intensity
  --organic-consciousness-mode: 'balanced'; // 'balanced', 'cinematic', 'atmospheric'
  
  // Performance consciousness settings
  --organic-performance-mode: 'optimal'; // 'minimal', 'balanced', 'optimal', 'maximum'
  --organic-animation-quality: 1.0; // 0-1 animation quality level
  --organic-visual-effects-quality: 1.0; // 0-1 visual effects quality
  
  // Debug and development flags
  --organic-debug-mode: 0; // Set to 1 to enable debug visualization
  --organic-development-mode: 0; // Set to 1 for development helpers
  
  // Apply consciousness to main application containers
  .Root {
    // Core organic consciousness properties
    @include organic-consciousness-base;
    
    // Breathing foundation
    animation: organic-global-breathing var(--organic-breathing-cycle, 1s) ease-in-out infinite;
    
    // Global consciousness field
    &::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      
      // Global consciousness background
      background: radial-gradient(
        ellipse at center,
        rgba(var(--organic-primary-rgb, 205, 214, 244), calc(var(--organic-fog-opacity, 0.02) * var(--organic-consciousness-level, 0.7) * 2)) 0%,
        rgba(var(--organic-holographic-rgb, 116, 199, 236), calc(var(--organic-fog-opacity, 0.02) * var(--organic-consciousness-level, 0.7) * 1)) 50%,
        transparent 80%
      );
      
      // Global consciousness breathing
      animation: organic-global-consciousness-field calc(var(--organic-breathing-cycle, 1s) * 2) ease-in-out infinite;
      
      // Performance optimization
      pointer-events: none;
      z-index: calc(var(--organic-depth-atmosphere, 0) - 10);
      will-change: opacity;
      contain: strict;
      mix-blend-mode: overlay;
    }
    
    // Consciousness mode variations
    &[data-consciousness-mode="cinematic"] {
      // Enhanced cinematic consciousness
      @include cinematic-color-grading('ambient', var(--organic-cinematic-intensity, 0.8));
      
      // Apply Blade Runner aesthetics
      @extend .organic-blade-runner-neon;
      @extend .organic-volumetric-fog;
      
      // Enhanced cinematic breathing
      animation: 
        organic-global-breathing var(--organic-breathing-cycle, 1s) ease-in-out infinite,
        organic-blade-runner-breathing calc(var(--organic-breathing-cycle, 1s) * 1.5) ease-in-out infinite;
    }
    
    &[data-consciousness-mode="atmospheric"] {
      // Enhanced atmospheric consciousness
      @extend .organic-atmospheric-particles;
      @extend .organic-volumetric-lighting;
      @extend .organic-environmental-consciousness;
      
      // Atmospheric enhancement
      filter: 
        saturate(calc(1.0 + var(--organic-emotional-saturation, 1) * 0.3))
        brightness(calc(1.0 + var(--organic-warmth, 0.8) * 0.15));
    }
    
    &[data-consciousness-mode="organic-tech"] {
      // Enhanced organic technology consciousness
      @extend .organic-holographic-display;
      @extend .organic-bioluminescent-tech;
      @extend .organic-crystalline-consciousness;
      
      // Organic-tech enhancement
      backdrop-filter: blur(1px) saturate(1.2);
    }
  }
  
  // Spicetify-specific consciousness integration
  .Root__main-view {
    // Apply organic consciousness to main view
    @extend .organic-consciousness-container;
    
    // Main view specific consciousness
    &.organic-consciousness-enabled {
      // Enhanced main view consciousness
      position: relative;
      
      // Main view atmospheric enhancement
      &::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        
        // Main view consciousness field
        background: linear-gradient(
          135deg,
          rgba(var(--organic-primary-rgb, 205, 214, 244), calc(var(--organic-shimmer-opacity, 0.05) * 2)) 0%,
          rgba(var(--organic-holographic-rgb, 116, 199, 236), calc(var(--organic-shimmer-opacity, 0.05) * 1)) 50%,
          rgba(var(--organic-accent-rgb, 203, 166, 247), calc(var(--organic-shimmer-opacity, 0.05) * 1.5)) 100%
        );
        
        // Main view consciousness breathing
        animation: organic-main-view-consciousness calc(var(--organic-breathing-cycle, 1s) * 3) ease-in-out infinite;
        
        pointer-events: none;
        z-index: calc(var(--organic-depth-atmosphere, 0) - 5);
        mix-blend-mode: overlay;
      }
    }
  }

  // Player bar consciousness integration
  .Root__nav-bar,
  .Root__now-playing-bar,
  .player-controls {
    // Apply cellular membrane to player elements
    &.organic-consciousness-enabled {
      position: relative;
      
      // Cellular membrane for player
      &::before {
        @include organic-cellular-membrane('high');
        // Player-specific membrane enhancements
        border-color: rgba(var(--organic-neon-glow-rgb, 116, 199, 236), calc(var(--organic-membrane-opacity, 0.3) * 1.2));
        box-shadow: 
          0 0 calc(var(--organic-membrane-thickness, 2px) * 3) rgba(var(--organic-neon-glow-rgb, 116, 199, 236), var(--organic-glow-opacity, 0.1)),
          inset 0 0 calc(var(--organic-membrane-thickness, 2px) * 2) rgba(var(--organic-holographic-rgb, 116, 199, 236), var(--organic-shimmer-opacity, 0.05));
      }
      
      // Player consciousness enhancement
      filter: 
        saturate(calc(1.0 + var(--organic-emotional-saturation, 1) * 0.3))
        brightness(calc(1.0 + var(--organic-symbiotic-resonance, 0.7) * 0.2));
      
      // Player symbiotic resonance
      @extend .organic-symbiotic-resonance;
      @extend .organic-beat-sync;
    }
  }

  // Sidebar consciousness integration
  .Root__nav-bar {
    // Apply organic consciousness to sidebar
    &.organic-consciousness-enabled {
      // Sidebar atmospheric enhancement
      @extend .organic-atmospheric-fog[data-fog-type="light"];
      
      // Sidebar consciousness field
      &::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        
        // Sidebar consciousness gradient
        background: linear-gradient(
          180deg,
          rgba(var(--organic-atmosphere-rgb, 88, 91, 112), calc(var(--organic-fog-opacity, 0.02) * 3)) 0%,
          rgba(var(--organic-primary-rgb, 205, 214, 244), calc(var(--organic-fog-opacity, 0.02) * 2)) 50%,
          rgba(var(--organic-atmosphere-rgb, 88, 91, 112), calc(var(--organic-fog-opacity, 0.02) * 3)) 100%
        );
        
        pointer-events: none;
        z-index: calc(var(--organic-depth-atmosphere, 0) - 3);
        mix-blend-mode: multiply;
      }
    }
  }
  
  // Card and item consciousness integration
  .card,
  .main-card,
  .artist-card,
  .playlist-card,
  .playlist-playlist,
  .artist-artist,
  .album-album,
  .track-row {
    // Apply organic consciousness to cards
    &.organic-consciousness-enabled {
      // Card cellular membrane
      @include organic-consciousness-base;
      
      // Card membrane host
      @extend .organic-membrane-host;
      
      // Card-specific membrane
      &::before {
        @include organic-cellular-membrane('medium');
      }
      
      // Card interaction enhancements
      &:hover {
        // Enhanced hover membrane growth
        &::before {
          @extend .membrane-hover;
        }
        
        // Card hover consciousness
        filter: 
          saturate(calc(1.0 + var(--organic-emotional-saturation, 1) * 0.4))
          brightness(calc(1.0 + var(--organic-hover-intensity, 0.3) * 0.2));
      }
      
      &:active {
        // Click membrane pulse
        &::before {
          @extend .membrane-click;
        }
      }
    }
    
    // Breathing synchronization
    &.organic-breathing-enabled {
      animation: organic-element-breathing var(--organic-breathing-cycle, 1s) ease-in-out infinite;
    }
  }

  // Button consciousness integration
  button,
  .button,
  .Button {
    // Apply organic consciousness to buttons
    &.organic-consciousness-enabled {
      // Button consciousness base
      @include organic-consciousness-base;
      @include organic-interaction-states;
      
      // Button text consciousness
      @include organic-text-consciousness('medium');
      
      // Button membrane
      &::before {
        @include organic-cellular-membrane('high');
        // Button-specific membrane styling
        border-radius: inherit;
      }
      
      // Button symbiotic listening
      @extend .organic-emotional-empathy;
    }
  }
  
  // Text consciousness integration
  h1, h2, h3, h4, h5, h6,
  .main-type-heading {
    // Apply text consciousness to headings
    &.organic-consciousness-enabled {
      @include organic-text-consciousness('high');
    }
  }

  p, span, div,
  .main-type-body,
  .main-type-bass {
    // Apply text consciousness to body text
    &.organic-consciousness-enabled {
      @include organic-text-consciousness('medium');
    }
  }

  .text-small,
  .description {
    // Apply text consciousness to small text
    &.organic-consciousness-enabled {
      @include organic-text-consciousness('low');
    }
  }
}

// === CONSCIOUSNESS MODE ADAPTATIONS ===

// Performance mode adaptations
:root[data-organic-performance-mode="minimal"] {
  // Minimal performance mode - disable complex effects
  .organic-consciousness-container {
    animation: none !important;
    filter: none !important;
    
    &::before {
      display: none !important;
    }
  }
  
  // Disable atmospheric effects in minimal mode
  .organic-atmospheric-particles,
  .organic-volumetric-lighting,
  .organic-atmospheric-fog {
    &::before,
    &::after {
      display: none !important;
    }
  }
}

:root[data-organic-performance-mode="balanced"] {
  // Balanced performance mode - optimize animations
  .organic-consciousness-container {
    animation-duration: calc(var(--organic-breathing-cycle, 1s) * 1.5) !important;
  }
  
  // Reduce atmospheric density in balanced mode
  .organic-atmospheric-particles {
    &::before {
      opacity: calc(var(--organic-cinematic-intensity, 0.8) * 0.3) !important;
    }
    
    &::after {
      opacity: calc(var(--organic-cinematic-intensity, 0.8) * 0.2) !important;
    }
  }
}

:root[data-organic-performance-mode="maximum"] {
  // Maximum performance mode - enhance all effects
  .organic-consciousness-container {
    // Enhanced maximum consciousness
    filter: 
      saturate(calc(1.0 + var(--organic-emotional-saturation, 1) * 0.5)) !important
      brightness(calc(1.0 + var(--organic-warmth, 0.8) * 0.3)) !important;
    
    // Maximum consciousness field enhancement
    &::before {
      opacity: calc(var(--organic-fog-opacity, 0.02) * 5) !important;
    }
  }
  
  // Enhanced atmospheric effects in maximum mode
  .organic-atmospheric-particles {
    @extend .organic-atmospheric-particles[data-particle-density="dense"];
  }
  
  .organic-volumetric-lighting {
    @extend .organic-volumetric-lighting[data-light-intensity="dramatic"];
  }
}

// === CONSCIOUSNESS SYSTEM KEYFRAMES ===

// Global consciousness field animation
@keyframes organic-global-consciousness-field {
  0% {
    opacity: calc(var(--organic-fog-opacity, 0.02) * var(--organic-consciousness-level, 0.7) * 2);
    background-size: 100% 100%;
  }
  
  50% {
    opacity: calc(var(--organic-fog-opacity, 0.02) * var(--organic-consciousness-level, 0.7) * 3);
    background-size: 105% 105%;
  }
  
  100% {
    opacity: calc(var(--organic-fog-opacity, 0.02) * var(--organic-consciousness-level, 0.7) * 2);
    background-size: 100% 100%;
  }
}

// Main view consciousness animation
@keyframes organic-main-view-consciousness {
  0% {
    opacity: calc(var(--organic-shimmer-opacity, 0.05) * 2);
    background-position: 0% 0%;
  }
  
  33% {
    opacity: calc(var(--organic-shimmer-opacity, 0.05) * 3);
    background-position: 50% 50%;
  }
  
  66% {
    opacity: calc(var(--organic-shimmer-opacity, 0.05) * 2.5);
    background-position: 100% 100%;
  }
  
  100% {
    opacity: calc(var(--organic-shimmer-opacity, 0.05) * 2);
    background-position: 0% 0%;
  }
}

// === ACCESSIBILITY SUPPORT ===

// Comprehensive reduced motion support
@media (prefers-reduced-motion: reduce) {
  .organic-consciousness-container,
  .Root__main-view,
  .Root__nav-bar,
  .player-controls,
  .card,
  button {
    animation: none !important;
    transition-duration: 0.1s !important;
    
    &::before,
    &::after {
      animation: none !important;
      transition-duration: 0.1s !important;
    }
  }
  
  // Disable complex visual effects for accessibility
  .organic-consciousness-container {
    filter: none !important;
    
    &::before {
      opacity: 0.05 !important;
    }
  }
  
  :root {
    // Disable animations for accessibility
    --organic-breathing-cycle: 0s;
    --organic-growth-intensity: 0;
    --organic-membrane-thickness: 1px;
    
    .Root::before,
    .organic-breathing-enabled,
    [class*="organic-"] {
      animation: none !important;
      transition-duration: 0.1s !important;
    }
  }
}

// High contrast mode support
@media (prefers-contrast: high) {
  .organic-consciousness-container {
    filter: 
      contrast(2.0) !important
      saturate(1.5) !important;
  }
  
  // Enhanced visibility for membrane borders
  .organic-cellular-membrane {
    border-width: calc(var(--organic-membrane-thickness, 2px) * 1.5) !important;
    opacity: calc(var(--organic-membrane-opacity, 0.3) * 2) !important;
  }
  
  // Enhanced text visibility
  h1, h2, h3, h4, h5, h6,
  p, span, div {
    &.organic-consciousness-enabled {
      text-shadow: 
        0 0 2px rgba(255, 255, 255, 0.8) !important,
        0 0 4px rgba(var(--organic-primary-rgb, 205, 214, 244), 0.6) !important;
    }
  }
  
  :root {
    // Enhanced visibility for high contrast
    --organic-membrane-thickness: 3px;
    --organic-emotional-saturation: 1.5;
    --organic-cinematic-contrast: 1.8;
    
    // Stronger consciousness effects
    .organic-consciousness-enabled {
      filter: 
        contrast(var(--organic-cinematic-contrast, 1.8))
        saturate(var(--organic-emotional-saturation, 1.5)) !important;
    }
  }
}

// Performance optimization layer
@layer organic-consciousness.performance {
  // GPU acceleration for consciousness elements
  .organic-consciousness-enabled,
  .organic-cellular-membrane,
  .organic-breathing-enabled {
    // Hardware acceleration
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
    
    // Optimized painting
    will-change: transform, opacity, filter;
    contain: layout style paint;
  }
  
  // Reduce consciousness on low-power devices
  @media (prefers-reduced-motion: reduce), (update: slow) {
    .organic-consciousness-enabled {
      // Minimal consciousness for performance
      filter: none !important;
      animation: none !important;
      transition-duration: 0.1s !important;
    }
  }
}

// === DEBUG MODE VISUALIZATION ===

// Debug mode for entire consciousness system
:root.organic-debug {
  // Global debug indicators
  &::before {
    content: '🧠 ORGANIC CONSCIOUSNESS SYSTEM ACTIVE';
    position: fixed;
    top: 10px;
    left: 10px;
    font-size: 12px;
    color: lime;
    background: rgba(0, 0, 0, 0.9);
    padding: 5px 10px;
    border-radius: 4px;
    z-index: 99999;
    pointer-events: none;
    border: 1px solid lime;
  }
  
  // Debug consciousness level indicator
  &::after {
    content: '🎵 Consciousness Level: ' attr(data-consciousness-level, '0.7');
    position: fixed;
    top: 50px;
    left: 10px;
    font-size: 11px;
    color: cyan;
    background: rgba(0, 0, 0, 0.9);
    padding: 4px 8px;
    border-radius: 3px;
    z-index: 99998;
    pointer-events: none;
    border: 1px solid cyan;
  }
  
  // Debug performance indicator
  .organic-consciousness-container {
    outline: 3px dashed lime !important;
    outline-offset: 2px;
    
    &::after {
      content: '🚀 Performance: ' attr(data-organic-performance-mode, 'optimal');
      position: fixed;
      top: 90px;
      left: 10px;
      font-size: 11px;
      color: yellow;
      background: rgba(0, 0, 0, 0.9);
      padding: 4px 8px;
      border-radius: 3px;
      z-index: 99997;
      pointer-events: none;
      border: 1px solid yellow;
    }
  }
  
  // Debug visualization for components
  .organic-cellular-membrane {
    outline: 2px dashed rgba(255, 0, 255, 0.5) !important;
    outline-offset: 2px;
  }
  
  .organic-consciousness-enabled {
    position: relative;
    
    &::after {
      content: '🧠 ORGANIC';
      position: absolute;
      top: 4px;
      right: 4px;
      font-size: 10px;
      color: #ff00ff;
      pointer-events: none;
      z-index: 9999;
      background: rgba(0, 0, 0, 0.8);
      padding: 2px 4px;
      border-radius: 2px;
    }
  }
}

// Debug mode for organic consciousness development
@layer organic-consciousness.debug {
  :root.organic-debug {
    // Debug system integration
    @extend :root.organic-debug;
  }
}

// === ORGANIC CONSCIOUSNESS SYSTEM READY ===
// Mark system as fully loaded and ready
:root {
  --organic-consciousness-main-loaded: 1;
  --organic-consciousness-system-ready: 1;
}