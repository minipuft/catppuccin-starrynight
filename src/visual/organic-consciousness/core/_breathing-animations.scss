// ████████████████████████████████████████████████████████████████████████████████
// BREATHING ANIMATIONS - Organic Rhythm System
// ████████████████████████████████████████████████████████████████████████████████

// === CORE BREATHING KEYFRAMES ===
// Fundamental breathing patterns synchronized with music tempo and user consciousness

// Global organic breathing (for main containers)
@keyframes organic-global-breathing {
  0% {
    transform: scale(1.0);
    filter: saturate(1.0) brightness(1.0);
  }
  
  50% {
    transform: scale(calc(1.0 + var(--organic-breathing-amplitude, 0.05) * 0.5));
    filter: 
      saturate(calc(1.0 + var(--organic-emotional-saturation, 1) * 0.05))
      brightness(calc(1.0 + var(--organic-breathing-amplitude, 0.05) * 0.5));
  }
  
  100% {
    transform: scale(1.0);
    filter: saturate(1.0) brightness(1.0);
  }
}

// Element-specific breathing (for individual components)
@keyframes organic-element-breathing {
  0% {
    transform: scale(var(--organic-growth-scale, 1.0));
    opacity: 1.0;
    filter: blur(0px) saturate(1.0);
  }
  
  25% {
    transform: scale(calc(var(--organic-growth-scale, 1.0) * (1.0 + var(--organic-breathing-amplitude, 0.05) * 0.3)));
    opacity: calc(1.0 + var(--organic-breathing-amplitude, 0.05) * 0.1);
    filter: 
      blur(calc(var(--organic-breathing-amplitude, 0.05) * 0.5px))
      saturate(calc(1.0 + var(--organic-emotional-saturation, 1) * 0.1));
  }
  
  50% {
    transform: scale(calc(var(--organic-growth-scale, 1.0) * (1.0 + var(--organic-breathing-amplitude, 0.05) * 0.5)));
    opacity: calc(1.0 + var(--organic-breathing-amplitude, 0.05) * 0.2);
    filter: 
      blur(calc(var(--organic-breathing-amplitude, 0.05) * 1px))
      saturate(calc(1.0 + var(--organic-emotional-saturation, 1) * 0.15));
  }
  
  75% {
    transform: scale(calc(var(--organic-growth-scale, 1.0) * (1.0 + var(--organic-breathing-amplitude, 0.05) * 0.3)));
    opacity: calc(1.0 + var(--organic-breathing-amplitude, 0.05) * 0.1);
    filter: 
      blur(calc(var(--organic-breathing-amplitude, 0.05) * 0.5px))
      saturate(calc(1.0 + var(--organic-emotional-saturation, 1) * 0.1));
  }
  
  100% {
    transform: scale(var(--organic-growth-scale, 1.0));
    opacity: 1.0;
    filter: blur(0px) saturate(1.0);
  }
}

// Membrane-specific breathing
@keyframes organic-membrane-breathing {
  0% {
    border-width: var(--organic-membrane-thickness, 2px);
    opacity: var(--organic-membrane-opacity, 0.3);
    box-shadow: 
      0 0 calc(var(--organic-membrane-thickness, 2px) * 2) rgba(var(--organic-primary-rgb, 205, 214, 244), var(--organic-glow-opacity, 0.1));
  }
  
  50% {
    border-width: calc(var(--organic-membrane-thickness, 2px) * (1.0 + var(--organic-breathing-amplitude, 0.05) * 2));
    opacity: calc(var(--organic-membrane-opacity, 0.3) * (1.0 + var(--organic-breathing-amplitude, 0.05) * 1.5));
    box-shadow: 
      0 0 calc(var(--organic-membrane-thickness, 2px) * 3) rgba(var(--organic-primary-rgb, 205, 214, 244), calc(var(--organic-glow-opacity, 0.1) * 1.5)),
      inset 0 0 calc(var(--organic-membrane-thickness, 2px) * 1.5) rgba(var(--organic-holographic-rgb, 116, 199, 236), calc(var(--organic-shimmer-opacity, 0.05) * 2));
  }
  
  100% {
    border-width: var(--organic-membrane-thickness, 2px);
    opacity: var(--organic-membrane-opacity, 0.3);
    box-shadow: 
      0 0 calc(var(--organic-membrane-thickness, 2px) * 2) rgba(var(--organic-primary-rgb, 205, 214, 244), var(--organic-glow-opacity, 0.1));
  }
}

// Host element breathing (for membrane hosts)
@keyframes organic-host-breathing {
  0% {
    filter: 
      saturate(calc(1.0 + var(--organic-emotional-saturation, 1) * 0.1))
      brightness(calc(1.0 + var(--organic-warmth, 0.8) * 0.05));
  }
  
  50% {
    filter: 
      saturate(calc(1.0 + var(--organic-emotional-saturation, 1) * 0.15))
      brightness(calc(1.0 + var(--organic-warmth, 0.8) * 0.08))
      hue-rotate(calc(var(--organic-breathing-amplitude, 0.05) * 10deg));
  }
  
  100% {
    filter: 
      saturate(calc(1.0 + var(--organic-emotional-saturation, 1) * 0.1))
      brightness(calc(1.0 + var(--organic-warmth, 0.8) * 0.05));
  }
}

// Atmospheric breathing (for background effects)
@keyframes organic-atmospheric-pulse {
  0% {
    opacity: var(--organic-fog-opacity, 0.02);
    transform: scale(1.0);
  }
  
  50% {
    opacity: calc(var(--organic-fog-opacity, 0.02) * 1.5);
    transform: scale(calc(1.0 + var(--organic-breathing-amplitude, 0.05) * 0.1));
  }
  
  100% {
    opacity: var(--organic-fog-opacity, 0.02);
    transform: scale(1.0);
  }
}

// Consciousness field breathing (for membrane backgrounds)
@keyframes organic-consciousness-field {
  0% {
    opacity: var(--organic-shimmer-opacity, 0.05);
    background-position: 0% 50%;
  }
  
  25% {
    opacity: calc(var(--organic-shimmer-opacity, 0.05) * 1.3);
    background-position: 25% 25%;
  }
  
  50% {
    opacity: calc(var(--organic-shimmer-opacity, 0.05) * 1.5);
    background-position: 50% 0%;
  }
  
  75% {
    opacity: calc(var(--organic-shimmer-opacity, 0.05) * 1.3);
    background-position: 75% 75%;
  }
  
  100% {
    opacity: var(--organic-shimmer-opacity, 0.05);
    background-position: 100% 50%;
  }
}

// === INTERACTION BREATHING ANIMATIONS ===

// Membrane growth animation
@keyframes organic-membrane-growth {
  0% {
    transform: scale(1.0);
    border-width: var(--organic-membrane-thickness, 2px);
    opacity: var(--organic-membrane-opacity, 0.3);
  }
  
  50% {
    transform: scale(calc(1.0 + var(--organic-growth-intensity, 0.5) * 0.1));
    border-width: calc(var(--organic-membrane-thickness, 2px) * 1.3);
    opacity: calc(var(--organic-membrane-opacity, 0.3) * 1.4);
  }
  
  100% {
    transform: scale(calc(1.0 + var(--organic-growth-intensity, 0.5) * 0.05));
    border-width: calc(var(--organic-membrane-thickness, 2px) * 1.1);
    opacity: calc(var(--organic-membrane-opacity, 0.3) * 1.2);
  }
}

// Membrane pulse animation (for clicks/beats)
@keyframes organic-membrane-pulse {
  0% {
    transform: scale(1.0);
    box-shadow: 
      0 0 calc(var(--organic-membrane-thickness, 2px) * 2) rgba(var(--organic-neon-glow-rgb, 116, 199, 236), var(--organic-glow-opacity, 0.1));
  }
  
  50% {
    transform: scale(1.1);
    box-shadow: 
      0 0 calc(var(--organic-membrane-thickness, 2px) * 5) rgba(var(--organic-neon-glow-rgb, 116, 199, 236), calc(var(--organic-glow-opacity, 0.1) * 2)),
      inset 0 0 calc(var(--organic-membrane-thickness, 2px) * 3) rgba(var(--organic-holographic-rgb, 116, 199, 236), calc(var(--organic-shimmer-opacity, 0.05) * 3));
  }
  
  100% {
    transform: scale(1.0);
    box-shadow: 
      0 0 calc(var(--organic-membrane-thickness, 2px) * 2) rgba(var(--organic-neon-glow-rgb, 116, 199, 236), var(--organic-glow-opacity, 0.1));
  }
}

// Beat synchronization pulse
@keyframes organic-membrane-beat-pulse {
  0% {
    border-color: rgba(var(--organic-primary-rgb, 205, 214, 244), var(--organic-membrane-opacity, 0.3));
    box-shadow: 
      0 0 calc(var(--organic-membrane-thickness, 2px) * 2) rgba(var(--organic-primary-rgb, 205, 214, 244), var(--organic-glow-opacity, 0.1));
  }
  
  50% {
    border-color: rgba(var(--organic-neon-glow-rgb, 116, 199, 236), calc(var(--organic-membrane-opacity, 0.3) * var(--organic-symbiotic-resonance, 0.7)));
    box-shadow: 
      0 0 calc(var(--organic-membrane-thickness, 2px) * 4) rgba(var(--organic-neon-glow-rgb, 116, 199, 236), calc(var(--organic-glow-opacity, 0.1) * var(--organic-symbiotic-resonance, 0.7)));
  }
  
  100% {
    border-color: rgba(var(--organic-primary-rgb, 205, 214, 244), var(--organic-membrane-opacity, 0.3));
    box-shadow: 
      0 0 calc(var(--organic-membrane-thickness, 2px) * 2) rgba(var(--organic-primary-rgb, 205, 214, 244), var(--organic-glow-opacity, 0.1));
  }
}

// Glow pulse animation
@keyframes organic-glow-pulse {
  0% {
    box-shadow: 
      0 0 calc(var(--organic-membrane-thickness, 2px) * 2) rgba(var(--organic-primary-rgb, 205, 214, 244), var(--organic-glow-opacity, 0.1));
  }
  
  50% {
    box-shadow: 
      0 0 calc(var(--organic-membrane-thickness, 2px) * 3) rgba(var(--organic-primary-rgb, 205, 214, 244), calc(var(--organic-glow-opacity, 0.1) * 1.5)),
      0 0 calc(var(--organic-membrane-thickness, 2px) * 6) rgba(var(--organic-primary-rgb, 205, 214, 244), calc(var(--organic-glow-opacity, 0.1) * 0.5));
  }
  
  100% {
    box-shadow: 
      0 0 calc(var(--organic-membrane-thickness, 2px) * 2) rgba(var(--organic-primary-rgb, 205, 214, 244), var(--organic-glow-opacity, 0.1));
  }
}

// === BREATHING TYPE VARIATIONS ===

// Gentle breathing (for calm/meditative states)
.organic-breathing-gentle {
  --breathing-type-amplitude: calc(var(--organic-breathing-amplitude, 0.05) * 0.6);
  --breathing-type-intensity: calc(var(--organic-emotional-saturation, 1) * 0.8);
  
  animation-timing-function: ease-in-out;
  animation-duration: calc(var(--organic-breathing-cycle, 1s) * 1.2);
}

// Energetic breathing (for high-energy states)
.organic-breathing-energetic {
  --breathing-type-amplitude: calc(var(--organic-breathing-amplitude, 0.05) * 1.5);
  --breathing-type-intensity: calc(var(--organic-emotional-saturation, 1) * 1.3);
  
  animation-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  animation-duration: calc(var(--organic-breathing-cycle, 1s) * 0.8);
}

// Meditative breathing (for ambient/peaceful states)
.organic-breathing-meditative {
  --breathing-type-amplitude: calc(var(--organic-breathing-amplitude, 0.05) * 0.4);
  --breathing-type-intensity: calc(var(--organic-emotional-saturation, 1) * 0.6);
  
  animation-timing-function: cubic-bezier(0.4, 0, 0.6, 1);
  animation-duration: calc(var(--organic-breathing-cycle, 1s) * 1.5);
}

// Cosmic breathing (for epic/transcendent states)
.organic-breathing-cosmic {
  --breathing-type-amplitude: calc(var(--organic-breathing-amplitude, 0.05) * 1.8);
  --breathing-type-intensity: calc(var(--organic-emotional-saturation, 1) * 1.5);
  
  animation-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1);
  animation-duration: calc(var(--organic-breathing-cycle, 1s) * 0.6);
  
  // Additional cosmic effects
  filter: 
    saturate(calc(1.0 + var(--breathing-type-intensity, 1) * 0.2))
    hue-rotate(calc(var(--breathing-type-amplitude, 0.05) * 20deg));
}

// === ACCESSIBILITY AND PERFORMANCE ===

// Reduced motion support
@media (prefers-reduced-motion: reduce) {
  // Disable all breathing animations
  [class*="organic-breathing"],
  .organic-cellular-membrane,
  .organic-membrane-host.organic-consciousness-enabled {
    animation: none !important;
    transition-duration: 0.1s !important;
  }
  
  // Override keyframes to be static
  @keyframes organic-global-breathing,
  @keyframes organic-element-breathing,
  @keyframes organic-membrane-breathing,
  @keyframes organic-host-breathing,
  @keyframes organic-atmospheric-pulse,
  @keyframes organic-consciousness-field {
    0%, 100% {
      transform: none;
      filter: none;
      opacity: inherit;
      border-width: inherit;
      box-shadow: inherit;
    }
  }
}

// Performance optimization for low-end devices
@media (update: slow) {
  // Simplified breathing for low-power devices
  .organic-cellular-membrane,
  [class*="organic-breathing"] {
    animation-duration: calc(var(--organic-breathing-cycle, 1s) * 2) !important;
    animation-fill-mode: both !important;
    will-change: auto !important;
  }
  
  // Disable complex visual effects
  @keyframes organic-element-breathing,
  @keyframes organic-membrane-breathing {
    0%, 100% {
      filter: none !important;
      box-shadow: inherit !important;
    }
    50% {
      filter: none !important;
      box-shadow: inherit !important;
    }
  }
}

// Debug mode for breathing system
:root.organic-debug {
  // Visual debugging for breathing animations
  [class*="organic-breathing"] {
    outline: 1px dashed rgba(0, 255, 255, 0.5) !important;
    outline-offset: 1px;
  }
  
  .organic-cellular-membrane {
    // Debug breathing indicators
    &::before {
      content: '🫁 BREATHING';
      position: absolute;
      top: -30px;
      right: 0;
      font-size: 10px;
      color: cyan;
      background: rgba(0, 0, 0, 0.8);
      padding: 2px 4px;
      border-radius: 2px;
      pointer-events: none;
      z-index: 9999;
    }
  }
}